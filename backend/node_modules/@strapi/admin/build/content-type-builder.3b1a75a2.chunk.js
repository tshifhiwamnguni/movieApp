"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[8880],{25747:(qe,le,l)=>{l.d(le,{Z:()=>ut});var r=l(32735),z=l(83292),ye=l(60216),L=l.n(ye),O=l(62345),Rt=l(1176),at=l(35071),J=l(88675),xt=l(73779),a=l(15431),F=l(22348),Ee=l(7184),rt=l(872),Zt=l(61642),Re=l(43475),At=l(89135),St=l(82512),Ge=l(58656),Ft=l(83218),xe=l(17757),d=l(32031),be=l(88425),In=l.n(be),D=Object.defineProperty,Nt=Object.defineProperties,Dt=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertySymbols,ot=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable,Ze=(w,U,I)=>U in w?D(w,U,{enumerable:!0,configurable:!0,writable:!0,value:I}):w[U]=I,B=(w,U)=>{for(var I in U||(U={}))ot.call(U,I)&&Ze(w,I,U[I]);if(je)for(var I of je(U))st.call(U,I)&&Ze(w,I,U[I]);return w},V=(w,U)=>Nt(w,Dt(U)),Ke=(w,U)=>{var I={};for(var $ in w)ot.call(w,$)&&U.indexOf($)<0&&(I[$]=w[$]);if(w!=null&&je)for(var $ of je(w))U.indexOf($)<0&&st.call(w,$)&&(I[$]=w[$]);return I};const it={biginteger:d.Z,boolean:xt.Z,collectionType:at.Z,component:Rt.Z,contentType:at.Z,date:J.Z,datetime:J.Z,decimal:d.Z,dynamiczone:a.Z,email:F.Z,enum:Ee.Z,enumeration:Ee.Z,file:Re.Z,files:Re.Z,float:d.Z,integer:d.Z,json:rt.Z,JSON:rt.Z,media:Re.Z,number:d.Z,password:At.Z,relation:St.Z,richtext:Zt.Z,singleType:Ge.Z,string:Ft.Z,text:Ft.Z,time:J.Z,timestamp:J.Z,uid:xe.Z},lt=(0,z.default)(O.x)`
  width: ${(0,be.pxToRem)(32)};
  height: ${(0,be.pxToRem)(24)};
  box-sizing: content-box;
`,He=w=>{var U=w,{type:I,customField:$}=U,Me=Ke(U,["type","customField"]);const dt=(0,be.useCustomFields)();let ct=it[I];if($){const{icon:me}=dt.get($);me&&(ct=me)}return it[I]?r.createElement(lt,V(B({as:ct},Me),{"aria-hidden":!0})):null};He.defaultProps={customField:null},He.propTypes={type:L().string.isRequired,customField:L().string};const ut=He},74753:(qe,le,l)=>{l.d(le,{Z:()=>ye});var r=l(32735);const ye=(0,r.createContext)()},51216:(qe,le,l)=>{l.d(le,{Z:()=>ye});var r=l(32735);const ye=(0,r.createContext)()},198:(qe,le,l)=>{l.d(le,{Z:()=>L});var r=l(32735),z=l(74753);const L=()=>(0,r.useContext)(z.Z)},32237:(qe,le,l)=>{l.d(le,{Z:()=>L});var r=l(32735),z=l(51216);const L=()=>(0,r.useContext)(z.Z)},92706:(qe,le,l)=>{l.r(le),l.d(le,{default:()=>rl});var r=l(32735),z=l(5141),ye=l(99357),L=l(5636),O=l(88425),Rt=l(96709),at=l(3633),J=l(25158),xt=l(60216),a=l.n(xt),F=l(92891),Ee=l(4409),rt=l(13055),Zt=l(74753),Re=l(32237),At=l(71112),St=(e,t,n)=>new Promise((o,s)=>{var i=m=>{try{c(n.next(m))}catch(f){s(f)}},u=m=>{try{c(n.throw(m))}catch(f){s(f)}},c=m=>m.done?o(m.value):Promise.resolve(m.value).then(i,u);c((n=n.apply(e,t)).next())});const Ge=At.Z.create({baseURL:`http://localhost:1337/${J.Z}`});Ge.interceptors.request.use(e=>St(void 0,null,function*(){return e.headers={Authorization:`Bearer ${O.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},e}),e=>{Promise.reject(e)}),Ge.interceptors.response.use(e=>e,e=>{var t;throw((t=e.response)==null?void 0:t.status)===401&&(O.auth.clearAppStorage(),window.location.reload()),e});const xe=(0,O.wrapAxiosInstance)(Ge);var d=l(92318),be=l(37087),In=l(33795),D=l.n(In),Nt=l(23973),Dt=l.n(Nt),je=l(3040),ot=l.n(je),st=l(59578),Ze=l.n(st),B=l(62345),V=l(41415),Ke=l(9026),it=l(85025),lt=l(31600),He=l(11406),ut=l(35540),w=l(39291),U=l(3653),I=l(36320),$=l(27677),Me=l(198),dt=l(27799),ct=l(23940),me=l.n(ct);const Er=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],It=({intlLabel:e,name:t,onChange:n,value:o})=>{const{formatMessage:s}=(0,L.useIntl)(),i=o===null||o.length===0?s({id:"global.none",defaultMessage:"None"}):[...o].sort().map(c=>me()(c)).join(", "),u=e.id?s({id:e.id,defaultMessage:e.defaultMessage}):t;return r.createElement(dt.Q,{id:"select1",label:u,customizeContent:()=>i,onChange:c=>{c.length>0?n({target:{name:t,value:c,type:"allowed-types-select"}}):n({target:{name:t,value:null,type:"allowed-types-select"}})},options:Er,value:o||[]})};It.defaultProps={value:null},It.propTypes={intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,name:a().string.isRequired,onChange:a().func.isRequired,value:a().oneOfType([a().object,a().array])};const Mr=It;var _=l(88860);const Ln=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0);var Lt=l(15335),mt=l(5803),qt=l(861),pt=l(25747),Ie=l(83292);const qn=(0,Ie.default)(B.x)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`,jt=({type:e})=>{const{formatMessage:t}=(0,L.useIntl)(),{onClickSelectField:n}=(0,Re.Z)(),o=()=>{n({attributeType:e,step:e==="component"?"1":null})};return r.createElement(qn,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:o},r.createElement(I.k,null,r.createElement(pt.Z,{type:e}),r.createElement(B.x,{paddingLeft:4},r.createElement(I.k,null,r.createElement(_.Z,{fontWeight:"bold"},t({id:(0,d.Z)(`attribute.${e}`),defaultMessage:e}))),r.createElement(I.k,null,r.createElement(_.Z,{variant:"pi",textColor:"neutral600"},t({id:(0,d.Z)(`attribute.${e}.description`),defaultMessage:"A type for modeling data"}))))))};jt.defaultProps={type:"text"},jt.propTypes={type:a().string};const Or=jt,jn=e=>{const t=e%2===1;return{paddingLeft:t?2:0,paddingRight:t?0:2}},Bn=({attributes:e})=>r.createElement(qt.k,{tagName:"button"},r.createElement($.K,{spacing:8},e.map((t,n)=>r.createElement(Lt.r,{key:n,gap:0},t.map((o,s)=>{const{paddingLeft:i,paddingRight:u}=jn(s);return r.createElement(mt.P,{key:o,col:6,style:{height:"100%"}},r.createElement(B.x,{paddingLeft:i,paddingRight:u,paddingBottom:1,style:{height:"100%"}},r.createElement(Or,{type:o})))})))));Bn.propTypes={attributes:a().array.isRequired};const Pr=Bn;var Rr=l(50428),xr=l(25148),Zr=l(99140),Le=l(19406),Ar=l(54725);const Sr=(0,Ie.default)(B.x)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Fr=()=>r.createElement(I.k,{wrap:"wrap",gap:4},[...Array(4)].map((e,t)=>r.createElement(Sr,{key:`empty-card-${t}`,height:"138px",width:"375px",hasRadius:!0}))),Nr=()=>{const{formatMessage:e}=(0,L.useIntl)();return r.createElement(B.x,{position:"relative"},r.createElement(Fr,null),r.createElement(B.x,{position:"absolute",top:6,width:"100%"},r.createElement(I.k,{alignItems:"center",justifyContent:"center",direction:"column"},r.createElement(Zr.J,{as:Ar.default,color:"",width:"160px",height:"88px"}),r.createElement(B.x,{paddingTop:6,paddingBottom:4},r.createElement(B.x,{textAlign:"center"},r.createElement(_.Z,{variant:"delta",as:"p",textColor:"neutral600"},e({id:(0,d.Z)("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})),r.createElement(B.x,{paddingTop:4},r.createElement(_.Z,{variant:"delta",as:"p",textColor:"neutral600"},e({id:(0,d.Z)("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."}))))),r.createElement(xr.Q,{to:"/marketplace",variant:"secondary",startIcon:r.createElement(Le.default,null)},e({id:(0,d.Z)("modalForm.empty.button"),defaultMessage:"Add custom fields"})))))},wn=({customFieldUid:e,customField:t})=>{const{type:n,intlLabel:o,intlDescription:s}=t,{formatMessage:i}=(0,L.useIntl)(),{onClickSelectCustomField:u}=(0,Re.Z)(),c=()=>{u({attributeType:n,customFieldUid:e})};return r.createElement(qn,{padding:4,as:"button",hasRadius:!0,type:"button",onClick:c},r.createElement(I.k,null,r.createElement(pt.Z,{type:n,customField:e}),r.createElement(B.x,{paddingLeft:4},r.createElement(I.k,null,r.createElement(_.Z,{fontWeight:"bold"},i(o))),r.createElement(I.k,null,r.createElement(_.Z,{variant:"pi",textColor:"neutral600"},i(s))))))};wn.propTypes={customFieldUid:a().string.isRequired,customField:a().shape({type:a().string.isRequired,icon:a().func,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}).isRequired,intlDescription:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}).isRequired}).isRequired};const Dr=wn,Ir=()=>{const{formatMessage:e}=(0,L.useIntl)(),t=(0,O.useCustomFields)(),n=Object.entries(t.getAll());if(!n.length)return r.createElement(Nr,null);const o=n.sort((s,i)=>s[1].name>i[1].name?1:-1);return r.createElement(qt.k,{tagName:"button"},r.createElement($.K,{spacing:3},r.createElement(Lt.r,{gap:0},o.map(([s,i],u)=>{const{paddingLeft:c,paddingRight:m}=jn(u);return r.createElement(mt.P,{key:s,col:6,style:{height:"100%"}},r.createElement(B.x,{paddingLeft:c,paddingRight:m,paddingBottom:1,style:{height:"100%"}},r.createElement(Dr,{key:s,customFieldUid:s,customField:i})))})),r.createElement(Rr.r,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0},e({id:(0,d.Z)("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"}))))},Un=({attributes:e,forTarget:t,kind:n})=>{const{formatMessage:o}=(0,L.useIntl)(),s=(0,d.Z)("modalForm.tabs.default"),i=(0,d.Z)("modalForm.tabs.custom"),u=t.includes("component")?"component":n,c=(0,d.Z)(`modalForm.sub-header.chooseAttribute.${u}`);return r.createElement(lt.f,{padding:6},r.createElement(ut.v,{label:o({id:(0,d.Z)("modalForm.tabs.label"),defaultMessage:"Default and Custom types tabs"}),id:"attribute-type-tabs",variant:"simple"},r.createElement(I.k,{justifyContent:"space-between"},r.createElement(_.Z,{variant:"beta",as:"h2"},o({id:c,defaultMessage:"Select a field"})),r.createElement(w.m,null,r.createElement(w.O,null,o({id:s,defaultMessage:"Default"})),r.createElement(w.O,null,o({id:i,defaultMessage:"Custom"})))),r.createElement(B.x,{paddingBottom:6},r.createElement(Ke.i,null)),r.createElement(U.n,null,r.createElement(U.x,null,r.createElement(Pr,{attributes:e})),r.createElement(U.x,null,r.createElement(Ir,null)))))};Un.propTypes={attributes:a().array.isRequired,forTarget:a().string.isRequired,kind:a().string.isRequired};const Lr=Un;var qr=l(22342),jr=l(96166),Br=l(88693),wr=l(9139),Ur=l(69932),$r=Object.defineProperty,$n=Object.getOwnPropertySymbols,Wr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,Wn=(e,t,n)=>t in e?$r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kn=(e,t)=>{for(var n in t||(t={}))Wr.call(t,n)&&Wn(e,n,t[n]);if($n)for(var n of $n(t))kr.call(t,n)&&Wn(e,n,t[n]);return e};const zr=(0,Ie.default)(_.Z)`
  text-align: center;
`,Bt=({description:e,disabled:t,intlLabel:n,isCreating:o,name:s,onChange:i,value:u})=>{const{formatMessage:c}=(0,L.useIntl)(),[m,f]=(0,r.useState)(!1),g=n.id?c({id:n.id,defaultMessage:n.defaultMessage},kn({},n.values)):s,p=e?c({id:e.id,defaultMessage:e.defaultMessage},kn({},e.values)):"",T=()=>f(Z=>!Z),h=()=>{i({target:{name:s,value:!1}}),T()},R=({target:{checked:Z}})=>{if(!Z&&!o){T();return}i({target:{name:s,value:Z}})};return r.createElement(r.Fragment,null,r.createElement(wr.s,{checked:u||!1,disabled:t,hint:p,label:g,name:s,offLabel:c({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:c({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:R}),m&&r.createElement(qr.V,{onClose:T,title:"Confirmation",isOpen:m},r.createElement(jr.a,{icon:r.createElement(Ur.default,null)},r.createElement($.K,{spacing:2},r.createElement(I.k,{justifyContent:"center"},r.createElement(zr,{id:"confirm-description"},c({id:(0,d.Z)("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the Draft/Publish system, your drafts will be deleted."}))),r.createElement(I.k,{justifyContent:"center"},r.createElement(_.Z,{id:"confirm-description"},c({id:(0,d.Z)("popUpWarning.draft-publish.second-message"),defaultMessage:"Are you sure you want to disable it?"}))))),r.createElement(Br.c,{startAction:r.createElement(V.z,{onClick:T,variant:"tertiary"},c({id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"})),endAction:r.createElement(V.z,{variant:"danger-light",onClick:h},c({id:(0,d.Z)("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"}))})))};Bt.defaultProps={description:null,disabled:!1,value:!1},Bt.propTypes={description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),disabled:a().bool,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,isCreating:a().bool.isRequired,name:a().string.isRequired,onChange:a().func.isRequired,value:a().bool};const Vr=Bt;var wt=l(11299),zn=l(55225);const Ut=({actionType:e,attributeName:t,attributeType:n,categoryName:o,contentTypeKind:s,dynamicZoneTarget:i,forTarget:u,modalType:c,targetUid:m,customFieldUid:f})=>{var g;const{formatMessage:p}=(0,L.useIntl)(),{modifiedData:T}=(0,Me.Z)();let h,R=[];const Z=((g=T==null?void 0:T[u])==null?void 0:g[m])||(T==null?void 0:T[u])||null;let q=Z==null?void 0:Z.schema.displayName;if(c==="contentType"&&(h=s),["component","editCategory"].includes(c)&&(h="component"),["component","contentType"].includes(c)){let v=(0,d.Z)(`modalForm.component.header-${e}`);return c==="contentType"&&(v=(0,d.Z)(`modalForm.${s}.header-create`)),e==="edit"&&(v=(0,d.Z)("modalForm.header-edit")),r.createElement(zn.x,null,r.createElement(I.k,null,r.createElement(B.x,null,r.createElement(pt.Z,{type:h})),r.createElement(B.x,{paddingLeft:3},r.createElement(_.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},p({id:v},{name:q})))))}R=[{label:q,info:{category:(Z==null?void 0:Z.category)||null,name:Z==null?void 0:Z.schema.displayName}}],c==="chooseAttribute"&&(h=["component","components"].includes(u)?"component":Z.schema.kind),c==="addComponentToDynamicZone"&&(h="dynamiczone",R.push({label:i})),(c==="attribute"||c==="customField")&&(h=n,R.push({label:t})),c==="editCategory"&&(R=[{label:p({id:(0,d.Z)("modalForm.header.categories"),defaultMessage:"Categories"})},{label:o}]);const S=R.map(({label:v})=>v).join(",");return r.createElement(zn.x,null,r.createElement($.K,{horizontal:!0,spacing:3},r.createElement(pt.Z,{type:h,customField:f}),r.createElement(wt.O,{label:S},R.map((v,K)=>{var G;const re=me()(v.label);if(!re)return null;const N=`${v.label}.${K}`;if((G=v.info)!=null&&G.category){const ee=`${re} (${me()(v.info.category)} - ${me()(v.info.name)})`;return r.createElement(wt.$,{key:N},ee)}return r.createElement(wt.$,{key:N},re)}))))};Ut.defaultProps={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,contentTypeKind:null,targetUid:null,customFieldUid:null},Ut.propTypes={actionType:a().string,attributeName:a().string,attributeType:a().string,categoryName:a().string,contentTypeKind:a().string,dynamicZoneTarget:a().string,forTarget:a().oneOf(["contentType","component","components"]),modalType:a().string.isRequired,targetUid:a().string,customFieldUid:a().string};const Gr=Ut,$t=({categoryName:e,deleteCategory:t,deleteComponent:n,deleteContentType:o,isAttributeModal:s,isCustomFieldModal:i,isComponentAttribute:u,isComponentToDzModal:c,isContentTypeModal:m,isCreatingComponent:f,isCreatingComponentAttribute:g,isCreatingComponentInDz:p,isCreatingComponentWhileAddingAField:T,isCreatingContentType:h,isCreatingDz:R,isComponentModal:Z,isDzAttribute:q,isEditingAttribute:E,isEditingCategory:S,isInFirstComponentStep:v,onSubmitAddComponentAttribute:K,onSubmitAddComponentToDz:G,onSubmitCreateContentType:re,onSubmitCreateComponent:N,onSubmitCreateDz:ee,onSubmitEditAttribute:W,onSubmitEditCategory:Qe,onSubmitEditComponent:Q,onSubmitEditContentType:We,onSubmitEditCustomFieldAttribute:Pe,onSubmitEditDz:Je,onClickFinish:Se})=>{const{formatMessage:k}=(0,L.useIntl)();return c?p?r.createElement(V.z,{variant:"secondary",type:"submit",onClick:M=>{M.preventDefault(),G(M,!0)},startIcon:r.createElement(Le.default,null)},k({id:(0,d.Z)("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})):r.createElement(V.z,{variant:"default",type:"submit",onClick:M=>{M.preventDefault(),G(M,!1)}},k({id:"global.finish",defaultMessage:"Finish"})):s&&q&&!R?r.createElement(V.z,{variant:"default",type:"submit",onClick:M=>{M.preventDefault(),Se(),Je(M,!1)}},k({id:"global.finish",defaultMessage:"Finish"})):s&&q&&R?r.createElement(r.Fragment,null,r.createElement(V.z,{variant:"secondary",type:"submit",onClick:M=>{M.preventDefault(),ee(M,!0)},startIcon:r.createElement(Le.default,null)},k({id:(0,d.Z)("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"}))):s&&u?v?r.createElement(V.z,{variant:"secondary",type:"submit",onClick:M=>{M.preventDefault(),K(M,!0)}},k(g?{id:(0,d.Z)("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:(0,d.Z)("form.button.select-component"),defaultMessage:"Configure the component"})):r.createElement(r.Fragment,null,r.createElement(V.z,{variant:"secondary",type:"submit",onClick:M=>{M.preventDefault(),K(M,!0)},startIcon:r.createElement(Le.default,null)},k(T?{id:(0,d.Z)("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),r.createElement(V.z,{variant:"default",type:"button",onClick:M=>{M.preventDefault(),Se(),K(M,!1)}},k({id:"global.finish",defaultMessage:"Finish"}))):s&&!u&&!q?r.createElement(r.Fragment,null,r.createElement(V.z,{type:E?"button":"submit",variant:"secondary",onClick:M=>{M.preventDefault(),W(M,!0)},startIcon:r.createElement(Le.default,null)},k({id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),r.createElement(V.z,{type:E?"submit":"button",variant:"default",onClick:M=>{M.preventDefault(),Se(),W(M,!1)}},k({id:"global.finish",defaultMessage:"Finish"}))):m?r.createElement(r.Fragment,null,!h&&r.createElement(r.Fragment,null,r.createElement(V.z,{type:"button",variant:"danger",onClick:M=>{M.preventDefault(),o()}},k({id:"global.delete",defaultMessage:"Delete"})),r.createElement(V.z,{type:"submit",variant:"default",onClick:M=>{M.preventDefault(),We(M,!1)}},k({id:"global.finish",defaultMessage:"Finish"}))),h&&r.createElement(V.z,{type:"submit",variant:"secondary",onClick:M=>{M.preventDefault(),re(M,!0)}},k({id:"global.continue",defaultMessage:"Continue"}))):Z?r.createElement(r.Fragment,null,!f&&r.createElement(r.Fragment,null,r.createElement(V.z,{type:"button",variant:"danger",onClick:M=>{M.preventDefault(),n()}},k({id:"global.delete",defaultMessage:"Delete"})),r.createElement(V.z,{type:"submit",variant:"default",onClick:M=>{M.preventDefault(),Q(M,!1)}},k({id:"global.finish",defaultMessage:"Finish"}))),f&&r.createElement(V.z,{type:"submit",variant:"secondary",onClick:M=>{M.preventDefault(),N(M,!0)}},k({id:"global.continue",defaultMessage:"Continue"}))):S?r.createElement(r.Fragment,null,r.createElement(V.z,{type:"button",variant:"danger",onClick:M=>{M.preventDefault(),t(e)}},k({id:"global.delete",defaultMessage:"Delete"})),r.createElement(V.z,{type:"submit",variant:"default",onClick:M=>{M.preventDefault(),Qe(M)}},k({id:"global.finish",defaultMessage:"finish"}))):i?r.createElement(r.Fragment,null,r.createElement(V.z,{type:E?"button":"submit",variant:"secondary",onClick:M=>{M.preventDefault(),Pe(M,!0)},startIcon:r.createElement(Le.default,null)},k({id:(0,d.Z)("form.button.add-field"),defaultMessage:"Add another field"})),r.createElement(V.z,{type:E?"submit":"button",variant:"default",onClick:M=>{M.preventDefault(),Se(),Pe(M,!1)}},k({id:"global.finish",defaultMessage:"Finish"}))):null};$t.defaultProps={categoryName:null,onClickFinish(){}},$t.propTypes={categoryName:a().string,deleteCategory:a().func.isRequired,deleteComponent:a().func.isRequired,deleteContentType:a().func.isRequired,isAttributeModal:a().bool.isRequired,isCustomFieldModal:a().bool.isRequired,isComponentAttribute:a().bool.isRequired,isComponentModal:a().bool.isRequired,isComponentToDzModal:a().bool.isRequired,isContentTypeModal:a().bool.isRequired,isCreatingComponent:a().bool.isRequired,isCreatingComponentAttribute:a().bool.isRequired,isCreatingComponentInDz:a().bool.isRequired,isCreatingComponentWhileAddingAField:a().bool.isRequired,isCreatingContentType:a().bool.isRequired,isCreatingDz:a().bool.isRequired,isDzAttribute:a().bool.isRequired,isEditingAttribute:a().bool.isRequired,isEditingCategory:a().bool.isRequired,isInFirstComponentStep:a().bool.isRequired,onSubmitAddComponentAttribute:a().func.isRequired,onSubmitAddComponentToDz:a().func.isRequired,onSubmitCreateContentType:a().func.isRequired,onSubmitCreateComponent:a().func.isRequired,onSubmitCreateDz:a().func.isRequired,onSubmitEditAttribute:a().func.isRequired,onSubmitEditCategory:a().func.isRequired,onSubmitEditComponent:a().func.isRequired,onSubmitEditContentType:a().func.isRequired,onSubmitEditCustomFieldAttribute:a().func.isRequired,onSubmitEditDz:a().func.isRequired,onClickFinish:a().func};const Kr=$t,Hr=({modalType:e,forTarget:t,kind:n,actionType:o,step:s})=>{switch(e){case"chooseAttribute":return(0,d.Z)(`modalForm.sub-header.chooseAttribute.${t.includes("component")?"component":n||"collectionType"}`);case"attribute":return(0,d.Z)(`modalForm.sub-header.attribute.${o}${s!=="null"&&s!==null&&o!=="edit"?".step":""}`);case"customField":return(0,d.Z)(`modalForm.sub-header.attribute.${o}`);case"addComponentToDynamicZone":return(0,d.Z)("modalForm.sub-header.addComponentToDynamicZone");default:return(0,d.Z)("configurations")}},Wt=({actionType:e,modalType:t,forTarget:n,kind:o,step:s,attributeType:i,attributeName:u,customField:c})=>{const{formatMessage:m}=(0,L.useIntl)(),f=t==="customField"?c.intlLabel:{id:(0,d.Z)(`attribute.${i}`)};return r.createElement($.K,{direction:"column",alignItems:"flex-start",paddingBottom:2,gap:1},r.createElement(_.Z,{as:"h2",variant:"beta"},m({id:Hr({actionType:e,forTarget:n,kind:o,step:s,modalType:t}),defaultMessage:"Add new field"},{type:me()(m(f)),name:me()(u),step:s})),r.createElement(_.Z,{variant:"pi",textColor:"neutral600"},m({id:(0,d.Z)(`attribute.${i}.description`),defaultMessage:"A type for modeling data"})))};Wt.defaultProps={actionType:null,modalType:null,forTarget:null,kind:null,step:null,attributeType:null,attributeName:null,customField:null},Wt.propTypes={actionType:a().string,modalType:a().string,forTarget:a().string,kind:a().string,step:a().string,attributeType:a().string,attributeName:a().string,customField:a().object};const Xr=Wt;var gt=l(70218),ft=l(84967),Yr=Object.defineProperty,Vn=Object.getOwnPropertySymbols,Qr=Object.prototype.hasOwnProperty,Jr=Object.prototype.propertyIsEnumerable,Gn=(e,t,n)=>t in e?Yr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_r=(e,t)=>{for(var n in t||(t={}))Qr.call(t,n)&&Gn(e,n,t[n]);if(Vn)for(var n of Vn(t))Jr.call(t,n)&&Gn(e,n,t[n]);return e};const kt=({intlLabel:e,name:t,options:n,onChange:o,value:s})=>{const{formatMessage:i}=(0,L.useIntl)(),u=e.id?i({id:e.id,defaultMessage:e.defaultMessage},_r({},e.values)):t,c=m=>{let f="";m==="true"&&(f=!0),m==="false"&&(f=!1),o({target:{name:t,value:f,type:"select-default-boolean"}})};return r.createElement(gt.P,{label:u,id:t,name:t,onChange:c,value:(s===null?"":s).toString()},n.map(({metadatas:{intlLabel:m,disabled:f,hidden:g},key:p,value:T})=>r.createElement(ft.W,{key:p,value:T,disabled:f,hidden:g},m.defaultMessage)))};kt.defaultProps={value:null},kt.propTypes={intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,name:a().string.isRequired,onChange:a().func.isRequired,options:a().arrayOf(a().shape({metadatas:a().shape({intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}).isRequired,disabled:a().bool,hidden:a().bool}).isRequired,key:a().oneOfType([a().string,a().number]).isRequired,value:a().oneOfType([a().string,a().number]).isRequired}).isRequired).isRequired,value:a().any};const eo=kt;var to=l(30350);const no=(0,Ie.default)($.K)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    ${(0,to.k3)()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    ${_.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,zt=({intlLabel:e,name:t,onChange:n,radios:o,value:s})=>{const{formatMessage:i}=(0,L.useIntl)();return r.createElement($.K,{spacing:2},r.createElement(_.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:t,as:"label"},i(e)),r.createElement(no,{horizontal:!0,spacing:4,style:{alignItems:"stretch"}},o.map(u=>r.createElement("label",{htmlFor:u.value.toString(),key:u.value,className:"container"},r.createElement("input",{id:u.value.toString(),name:t,className:"option-input",checked:u.value===s,value:u.value,key:u.value,onChange:n,type:"radio"}),r.createElement(B.x,{className:"option",padding:4},r.createElement(I.k,null,r.createElement(B.x,{paddingRight:4},r.createElement("span",{className:"checkmark"})),r.createElement($.K,{spacing:2},r.createElement(_.Z,{fontWeight:"bold"},i(u.title)),r.createElement(_.Z,{variant:"pi",textColor:"neutral600"},i(u.description)))))))))};zt.defaultProps={radios:[]},zt.propTypes={intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,name:a().string.isRequired,onChange:a().func.isRequired,radios:a().arrayOf(a().shape({title:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}),description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}),value:a().any.isRequired})),value:a().oneOfType([a().string,a().bool]).isRequired};const Vt=zt;var ao=Object.defineProperty,ro=Object.defineProperties,oo=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,Kn=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable,Xn=(e,t,n)=>t in e?ao(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,so=(e,t)=>{for(var n in t||(t={}))Kn.call(t,n)&&Xn(e,n,t[n]);if(yt)for(var n of yt(t))Hn.call(t,n)&&Xn(e,n,t[n]);return e},io=(e,t)=>ro(e,oo(t)),lo=(e,t)=>{var n={};for(var o in e)Kn.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&yt)for(var o of yt(e))t.indexOf(o)<0&&Hn.call(e,o)&&(n[o]=e[o]);return n};const Yn=e=>{var t=e,{onChange:n,name:o}=t,s=lo(t,["onChange","name"]);const i=u=>{const c=u.target.value!=="false";n({target:{name:o,value:c,type:"boolean-radio-group"}})};return r.createElement(Vt,io(so({},s),{name:o,onChange:i}))};Yn.propTypes={name:a().string.isRequired,onChange:a().func.isRequired};const uo=Yn;var co=l(8284),mo=l(81595),Gt=l(10369),po=Object.defineProperty,Qn=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,fo=Object.prototype.propertyIsEnumerable,Jn=(e,t,n)=>t in e?po(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yo=(e,t)=>{for(var n in t||(t={}))go.call(t,n)&&Jn(e,n,t[n]);if(Qn)for(var n of Qn(t))fo.call(t,n)&&Jn(e,n,t[n]);return e};const Kt=({error:e,intlLabel:t,modifiedData:n,name:o,onChange:s,value:i})=>{const{formatMessage:u}=(0,L.useIntl)(),[c,m]=(0,r.useState)(!!i||i===0),f=t.id?u({id:t.id,defaultMessage:t.defaultMessage},yo({},t.values)):o,g=n.type==="biginteger"?"text":"number",p=!n.type,T=e?u({id:e,defaultMessage:e}):"";return r.createElement($.K,{spacing:2},r.createElement(co.X,{id:o,name:o,onValueChange:h=>{s({target:{name:o,value:h?g==="text"?"0":0:null}}),m(q=>!q)},value:c},f),c&&r.createElement(B.x,{paddingLeft:6,style:{maxWidth:"200px"}},g==="text"?r.createElement(Gt.o,{"aria-label":f,disabled:p,error:T,id:o,name:o,onChange:s,value:i===null?"":i}):r.createElement(mo.Y,{"aria-label":f,disabled:p,error:T,id:o,name:o,onValueChange:h=>{s({target:{name:o,value:h,type:g}})},value:i||0})))};Kt.defaultProps={error:null,value:null},Kt.propTypes={error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,modifiedData:a().object.isRequired,name:a().string.isRequired,onChange:a().func.isRequired,value:a().oneOfType([a().string,a().object,a().bool,a().number])};const bo=Kt;var vo=Object.defineProperty,ho=Object.defineProperties,To=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,ea=Object.prototype.propertyIsEnumerable,ta=(e,t,n)=>t in e?vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Co=(e,t)=>{for(var n in t||(t={}))_n.call(t,n)&&ta(e,n,t[n]);if(bt)for(var n of bt(t))ea.call(t,n)&&ta(e,n,t[n]);return e},Eo=(e,t)=>ho(e,To(t)),Mo=(e,t)=>{var n={};for(var o in e)_n.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&bt)for(var o of bt(e))t.indexOf(o)<0&&ea.call(e,o)&&(n[o]=e[o]);return n};const na=e=>{var t=e,{onChange:n}=t,o=Mo(t,["onChange"]);const s=(0,O.useNotification)(),i=u=>{s({type:"info",message:{id:(0,d.Z)("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."}}),n(u)};return r.createElement(Vt,Eo(Co({},o),{onChange:i}))};na.propTypes={onChange:a().func.isRequired};const Oo=na;var Ht=l(49561),aa=l(34853),ne=l(91559);const Xt=({oneThatIsCreatingARelationWithAnother:e,target:t})=>{const{contentTypes:n,sortedContentTypesList:o}=(0,Me.Z)(),s=(0,Ee.useDispatch)(),i=o.filter(Ln),u=D()(n,[t,"plugin"],null),c=D()(n,[t,"schema","displayName"],"error");return r.createElement(aa.O,{id:"label",label:`${c}
    ${u?`(from: ${u})`:""}`},i.map(({uid:m,title:f,restrictRelationsTo:g,plugin:p})=>{const T=()=>{const h=p?`${p}_${f}`:f;s({type:ne.aG,target:{value:m,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:h,targetContentTypeAllowedRelations:g}})};return r.createElement(aa.s,{key:m,onClick:T},f,"\xA0",p&&r.createElement(r.Fragment,null,"(from: ",p,")"))}))};Xt.defaultProps={target:null},Xt.propTypes={oneThatIsCreatingARelationWithAnother:a().string.isRequired,target:a().string};const Po=Xt,Yt=({disabled:e,error:t,header:n,isMain:o,name:s,onChange:i,oneThatIsCreatingARelationWithAnother:u,target:c,value:m})=>r.createElement(B.x,{background:"neutral100",hasRadius:!0,borderColor:"neutral200"},r.createElement(I.k,{paddingTop:o?4:1,paddingBottom:o?3:1,justifyContent:"center"},o?r.createElement(_.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},n):r.createElement(Po,{target:c,oneThatIsCreatingARelationWithAnother:u})),r.createElement(Ke.i,{background:"neutral200"}),r.createElement(B.x,{padding:4},r.createElement(O.GenericInput,{disabled:e,error:(t==null?void 0:t.id)||null,intlLabel:{id:(0,d.Z)("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:s,onChange:i,type:"text",value:m})));Yt.defaultProps={disabled:!1,error:null,header:null,isMain:!1,onChange(){},oneThatIsCreatingARelationWithAnother:null,target:null,value:""},Yt.propTypes={disabled:a().bool,error:a().object,header:a().string,isMain:a().bool,name:a().string.isRequired,onChange:a().func,oneThatIsCreatingARelationWithAnother:a().string,target:a().string,value:a().string};const ra=Yt;var Ro=l(51382),oa=l.n(Ro),xo=l(24443),Qt=l.n(xo),Zo=l(10168),Ao=l(25449),So=l(32548),Fo=l(7733),No=l(79634),Do=l(26253);const Io=(0,Ie.default)(B.x)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,Lo=(0,Ie.default)(B.x)`
  background: ${({theme:e,isSelected:t})=>e.colors[t?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,isSelected:t})=>e.colors[t?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  svg {
    width: 1.5rem;
    height: 100%;
    path {
      fill: ${({theme:e,isSelected:t})=>e.colors[t?"primary700":"neutral500"]};
    }
  }
  &:disabled {
    cursor: not-allowed;
  }
`,qo=(0,Ie.default)(I.k)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,jo={oneWay:Ao.Z,oneToOne:Zo.Z,oneToMany:Fo.Z,manyToOne:No.Z,manyToMany:Do.Z,manyWay:So.Z},Jt=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:t,relationType:n,target:o})=>{const s=(0,Ee.useDispatch)(),{formatMessage:i}=(0,L.useIntl)(),{contentTypes:u,modifiedData:c}=(0,Me.Z)(),m=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],f=["oneWay","manyWay"],p=(e==="contentType"?D()(c,[e,"schema","kind"],""):e)==="collectionType"?m:f,T=n==="manyToOne",h=D()(u,[o,"schema","displayName"],"unknown"),R=T?h:t,Z=T?t:h,q=Qt()(R,n==="manyToMany"?2:1),E=D()(u,[o,"schema","restrictRelationsTo"],null),S=Qt()(Z,["manyToMany","oneToMany","manyToOne","manyWay"].includes(n)?2:1);return n?r.createElement(I.k,{style:{flex:1}},r.createElement(Io,null,r.createElement(I.k,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center"},r.createElement(qt.k,{tagName:"button"},r.createElement($.K,{spacing:3,horizontal:!0},p.map(v=>{const K=jo[v],G=E===null||E.includes(v);return r.createElement(Lo,{as:"button",isSelected:n===v,disabled:!G,key:v,onClick:()=>{G&&s({type:ne.QQ,target:{oneThatIsCreatingARelationWithAnother:t,targetContentType:o,value:v}})},padding:2,type:"button"},r.createElement(K,{key:v}))}))))),r.createElement(qo,{justifyContent:"center"},r.createElement(_.Z,null,oa()(q,{length:24}),"\xA0"),r.createElement(_.Z,{textColor:"primary600"},i({id:(0,d.Z)(`relation.${n}`)}),"\xA0"),r.createElement(_.Z,null,oa()(S,{length:24})))):null};Jt.defaultProps={relationType:null,target:null},Jt.propTypes={naturePickerType:a().string.isRequired,oneThatIsCreatingARelationWithAnother:a().string.isRequired,relationType:a().string,target:a().string};const Bo=Jt,sa=({formErrors:e,mainBoxHeader:t,modifiedData:n,naturePickerType:o,onChange:s})=>{const i=(0,Ht.Z)(n.relation,n.targetAttribute);return r.createElement(I.k,{style:{position:"relative"}},r.createElement(ra,{isMain:!0,header:t,error:(e==null?void 0:e.name)||null,name:"name",onChange:s,value:(n==null?void 0:n.name)||""}),r.createElement(Bo,{naturePickerType:o,oneThatIsCreatingARelationWithAnother:t,relationType:i,target:n.target}),r.createElement(ra,{disabled:["oneWay","manyWay"].includes(i),error:(e==null?void 0:e.targetAttribute)||null,name:"targetAttribute",onChange:s,oneThatIsCreatingARelationWithAnother:t,target:n.target,value:(n==null?void 0:n.targetAttribute)||""}))};sa.propTypes={formErrors:a().object.isRequired,mainBoxHeader:a().string.isRequired,modifiedData:a().object.isRequired,naturePickerType:a().string.isRequired,onChange:a().func.isRequired};const wo=sa;var ia=l(45251),Uo=Object.defineProperty,la=Object.getOwnPropertySymbols,$o=Object.prototype.hasOwnProperty,Wo=Object.prototype.propertyIsEnumerable,ua=(e,t,n)=>t in e?Uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ko=(e,t)=>{for(var n in t||(t={}))$o.call(t,n)&&ua(e,n,t[n]);if(la)for(var n of la(t))Wo.call(t,n)&&ua(e,n,t[n]);return e};const _t=({description:e,error:t,intlLabel:n,modifiedData:o,name:s,onChange:i,value:u})=>{const{formatMessage:c}=(0,L.useIntl)(),m=(0,r.useRef)(i),f=(o==null?void 0:o.displayName)||"";(0,r.useEffect)(()=>{if(f){const h=(0,ia.Z)(f);try{const R=Qt()(h,2);m.current({target:{name:s,value:R}})}catch(R){m.current({target:{name:s,value:h}})}}else m.current({target:{name:s,value:""}})},[f,s]);const g=t?c({id:t,defaultMessage:t}):"",p=e?c({id:e.id,defaultMessage:e.defaultMessage},ko({},e.values)):"",T=c(n);return r.createElement(Gt.o,{error:g,label:T,id:s,hint:p,name:s,onChange:i,value:u||""})};_t.defaultProps={description:null,error:null,value:null},_t.propTypes={description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,modifiedData:a().object.isRequired,name:a().string.isRequired,onChange:a().func.isRequired,value:a().string};const zo=_t;var Vo=l(21590),Go=l(90333);const en=({error:e,intlLabel:t,name:n,onChange:o,value:s})=>{const{formatMessage:i}=(0,L.useIntl)(),{allComponentsCategories:u}=(0,Me.Z)(),[c,m]=(0,r.useState)(u),f=e?i({id:e,defaultMessage:e}):"",g=i(t),p=h=>{o({target:{name:n,value:h,type:"select-category"}})},T=h=>{m(R=>[...R,h]),p(h)};return r.createElement(Vo.X,{error:f,id:n,label:g,name:n,onChange:p,onCreateOption:T,value:s},c.map(h=>r.createElement(Go.O,{key:h,value:h},h)))};en.defaultProps={error:null,value:null},en.propTypes={error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,name:a().string.isRequired,onChange:a().func.isRequired,value:a().string};const Ko=en,tn=({error:e,intlLabel:t,isAddingAComponentToAnotherComponent:n,isCreating:o,isCreatingComponentWhileAddingAField:s,componentToCreate:i,name:u,onChange:c,targetUid:m,forTarget:f,value:g})=>{const{formatMessage:p}=(0,L.useIntl)(),T=e?p({id:e,defaultMessage:e}):"",h=p(t),{componentsGroupedByCategory:R,componentsThatHaveOtherComponentInTheirAttributes:Z}=(0,Me.Z)(),q=["component","components"].includes(f);let E=Object.entries(R).reduce((S,v)=>{const[K,G]=v,re=G.map(N=>({uid:N.uid,label:N.schema.displayName,categoryName:K}));return[...S,...re]},[]);return n&&(E=E.filter(S=>!Z.includes(S.uid))),q&&(E=E.filter(S=>S.uid!==m)),s&&(E=[{uid:g,label:i.displayName,categoryName:i.category}]),r.createElement(gt.P,{disabled:s||!o,error:T,label:h,id:u,name:u,onChange:S=>{c({target:{name:u,value:S,type:"select-category"}})},value:g||""},E.map(S=>r.createElement(ft.W,{key:S.uid,value:S.uid},`${S.categoryName} - ${S.label}`)))};tn.defaultProps={componentToCreate:null,error:null},tn.propTypes={componentToCreate:a().object,forTarget:a().string.isRequired,error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,isAddingAComponentToAnotherComponent:a().bool.isRequired,isCreating:a().bool.isRequired,isCreatingComponentWhileAddingAField:a().bool.isRequired,name:a().string.isRequired,onChange:a().func.isRequired,targetUid:a().string.isRequired,value:a().string.isRequired};const Ho=tn,nn=(e,t)=>e.find(({name:n})=>n===t),da=({dynamicZoneTarget:e,intlLabel:t,name:n,onChange:o,value:s})=>{const{formatMessage:i}=(0,L.useIntl)(),{componentsGroupedByCategory:u,modifiedData:c}=(0,Me.Z)(),f=(nn(c.contentType.schema.attributes,e)||{}).components||[],g=Object.keys(u).reduce((h,R)=>{const Z=u[R].filter(({uid:q})=>!f.includes(q));return Z.length>0&&(h[R]=Z),h},{}),p=Object.entries(g).reduce((h,R)=>{const[Z,q]=R,E={label:Z,children:q.map(({uid:S,schema:{displayName:v}})=>({label:v,value:S}))};return h.push(E),h},[]),T=i({id:(0,d.Z)("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:s.length});return r.createElement(dt.Q,{id:"select1",label:i(t),customizeContent:()=>T,name:n,onChange:h=>{o({target:{name:n,value:h,type:"select-components"}})},options:p,value:s||[]})};da.propTypes={intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,dynamicZoneTarget:a().string.isRequired,name:a().string.isRequired,onChange:a().func.isRequired,value:a().array.isRequired};const Xo=da,an=({intlLabel:e,error:t,modifiedData:n,name:o,onChange:s,options:i,value:u})=>{const{formatMessage:c}=(0,L.useIntl)(),m=c(e),f=t?c({id:t,defaultMessage:t}):"",g=p=>{s({target:{name:o,value:p,type:"select"}}),!!u&&n.default!==void 0&&n.default!==null&&s({target:{name:"default",value:null}})};return r.createElement(gt.P,{error:f,label:m,id:o,name:o,onChange:g,value:u||""},i.map(({metadatas:{intlLabel:p,disabled:T,hidden:h},key:R,value:Z})=>r.createElement(ft.W,{key:R,value:Z,disabled:T,hidden:h},c({id:p.id,defaultMessage:p.defaultMessage},p.values))))};an.defaultProps={error:void 0,value:""},an.propTypes={error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,modifiedData:a().object.isRequired,name:a().string.isRequired,onChange:a().func.isRequired,options:a().arrayOf(a().shape({metadatas:a().shape({intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}).isRequired,disabled:a().bool,hidden:a().bool}).isRequired,key:a().oneOfType([a().string,a().number]).isRequired,value:a().oneOfType([a().string,a().number]).isRequired}).isRequired).isRequired,value:a().string};const Yo=an,rn=({intlLabel:e,error:t,modifiedData:n,name:o,onChange:s,options:i,value:u})=>{const{formatMessage:c}=(0,L.useIntl)(),m=c(e),f=t?c({id:t,defaultMessage:t}):"",g=p=>{s({target:{name:o,value:p,type:"select"}}),u&&(p==="biginteger"&&u!=="biginteger"&&(n.default!==void 0&&n.default!==null&&s({target:{name:"default",value:null}}),n.max!==void 0&&n.max!==null&&s({target:{name:"max",value:null}}),n.min!==void 0&&n.min!==null&&s({target:{name:"min",value:null}})),["decimal","float","integer"].includes(p)&&u==="biginteger"&&(n.default!==void 0&&n.default!==null&&s({target:{name:"default",value:null}}),n.max!==void 0&&n.max!==null&&s({target:{name:"max",value:null}}),n.min!==void 0&&n.min!==null&&s({target:{name:"min",value:null}})))};return r.createElement(gt.P,{error:f,label:m,id:o,name:o,onChange:g,value:u||""},i.map(({metadatas:{intlLabel:p,disabled:T,hidden:h},key:R,value:Z})=>r.createElement(ft.W,{key:R,value:Z,disabled:T,hidden:h},c(p))))};rn.defaultProps={error:void 0,value:""},rn.propTypes={error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,modifiedData:a().object.isRequired,name:a().string.isRequired,onChange:a().func.isRequired,options:a().arrayOf(a().shape({metadatas:a().shape({intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}).isRequired,disabled:a().bool,hidden:a().bool}).isRequired,key:a().oneOfType([a().string,a().number]).isRequired,value:a().oneOfType([a().string,a().number]).isRequired}).isRequired).isRequired,value:a().string};const Qo=rn;var Jo=Object.defineProperty,ca=Object.getOwnPropertySymbols,_o=Object.prototype.hasOwnProperty,es=Object.prototype.propertyIsEnumerable,ma=(e,t,n)=>t in e?Jo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ts=(e,t)=>{for(var n in t||(t={}))_o.call(t,n)&&ma(e,n,t[n]);if(ca)for(var n of ca(t))es.call(t,n)&&ma(e,n,t[n]);return e};const on=({description:e,error:t,intlLabel:n,modifiedData:o,name:s,onChange:i,value:u})=>{const{formatMessage:c}=(0,L.useIntl)(),m=(0,r.useRef)(i),f=(o==null?void 0:o.displayName)||"";(0,r.useEffect)(()=>{f?m.current({target:{name:s,value:(0,ia.Z)(f)}}):m.current({target:{name:s,value:""}})},[f,s]);const g=t?c({id:t,defaultMessage:t}):"",p=e?c({id:e.id,defaultMessage:e.defaultMessage},ts({},e.values)):"",T=c(n);return r.createElement(Gt.o,{error:g,label:T,id:s,hint:p,name:s,onChange:i,value:u||""})};on.defaultProps={description:null,error:null,value:null},on.propTypes={description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,modifiedData:a().object.isRequired,name:a().string.isRequired,onChange:a().func.isRequired,value:a().string};const ns=on;var as=Object.defineProperty,rs=Object.defineProperties,os=Object.getOwnPropertyDescriptors,pa=Object.getOwnPropertySymbols,ss=Object.prototype.hasOwnProperty,is=Object.prototype.propertyIsEnumerable,ga=(e,t,n)=>t in e?as(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fa=(e,t)=>{for(var n in t||(t={}))ss.call(t,n)&&ga(e,n,t[n]);if(pa)for(var n of pa(t))is.call(t,n)&&ga(e,n,t[n]);return e},ls=(e,t)=>rs(e,os(t));const ya=({form:e,formErrors:t,genericInputProps:n,modifiedData:o,onChange:s})=>{const{formatMessage:i}=(0,L.useIntl)();return e.map((u,c)=>u.items.length===0?null:r.createElement(B.x,{key:c},u.sectionTitle&&r.createElement(B.x,{paddingBottom:4},r.createElement(_.Z,{variant:"delta",as:"h3"},i(u.sectionTitle))),r.createElement(Lt.r,{gap:4},u.items.map((m,f)=>{const g=`${c}.${f}`,p=D()(o,m.name,""),T=Object.keys(t).find(R=>R===m.name),h=T?t[T].id:D()(t,[...m.name.split(".").filter(R=>R!=="componentToCreate"),"id"],null);return m.type==="pushRight"?r.createElement(mt.P,{col:m.size||6,key:m.name||g},r.createElement("div",null)):r.createElement(mt.P,{col:m.size||6,key:m.name||g},r.createElement(O.GenericInput,ls(fa(fa({},m),n),{error:h,onChange:s,value:p})))}))))};ya.propTypes={form:a().arrayOf(a().object).isRequired,formErrors:a().object.isRequired,genericInputProps:a().object.isRequired,modifiedData:a().object.isRequired,onChange:a().func.isRequired};const ba=ya;var us=l(10508),ds=Object.defineProperty,va=Object.getOwnPropertySymbols,cs=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable,ha=(e,t,n)=>t in e?ds(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ta=(e,t)=>{for(var n in t||(t={}))cs.call(t,n)&&ha(e,n,t[n]);if(va)for(var n of va(t))ms.call(t,n)&&ha(e,n,t[n]);return e};const sn=({description:e,disabled:t,error:n,intlLabel:o,labelAction:s,name:i,onChange:u,placeholder:c,value:m})=>{const{formatMessage:f}=(0,L.useIntl)(),g=n?f({id:n,defaultMessage:n}):"",p=e?f({id:e.id,defaultMessage:e.defaultMessage},Ta({},e.values)):"",T=f(o),h=c?f({id:c.id,defaultMessage:c.defaultMessage},Ta({},c.values)):"",R=Array.isArray(m)?m.join(`
`):"",Z=q=>{const E=q.target.value.split(`
`);u({target:{name:i,value:E}})};return r.createElement(us.g,{disabled:t,error:g,label:T,labelAction:s,id:i,hint:p,name:i,onChange:Z,placeholder:h,value:R},R)};sn.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,value:""},sn.propTypes={description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),disabled:a().bool,error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,labelAction:a().element,name:a().string.isRequired,onChange:a().func.isRequired,placeholder:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),value:a().oneOfType([a().array,a().string])};const ps=sn,gs=(e,t)=>{const n=D()(e,["contentType","schema","kind"],"");return n==="singleType"||n===t.kind?!0:D()(e,["contentType","schema","attributes"],[]).filter(({relation:i,type:u,targetAttribute:c})=>{const m=(0,Ht.Z)(i,c);return u==="relation"&&!["oneWay","manyWay"].includes(m)}).length===0},fs=(e="",t,n)=>{const o=["text","email","richtext","password","number","enumeration","date","media","boolean","json","relation"],s=e==="contentType",i=n.includes(t),u=!s&&!i;return s?[[...o,"uid"],["component","dynamiczone"]]:u?[o,["component"]]:[o]},Ca=e=>e.reduce((t,n)=>{const o=n.items.reduce((s,i)=>(i.name&&s.push(i.name),s),[]);return[...t,...o]},[]);var b=l(5173),Be=l(2158);const ys={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:(0,d.Z)("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}},Ea=/^[A-Za-z][-_0-9A-Za-z]*$/,bs=e=>{const t={name:b.Z_().matches(Ea,O.translatedErrors.regex).test({name:"nameNotAllowed",message:O.translatedErrors.unique,test(n){return n?!e.includes((0,F.toLower)(n)):!1}}).required(O.translatedErrors.required)};return b.Ry(t)},vs=(e,t,n)=>{const o={displayName:b.Z_().test({name:"nameAlreadyUsed",message:O.translatedErrors.unique,test(s){if(!s)return!1;const i=(0,Be.N)(s,n);return!e.includes(i)}}).test({name:"nameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(s){return s?!t.includes((0,F.toLower)((0,F.trim)(s))):!1}}).required(O.translatedErrors.required),category:b.Z_().matches(Ea,O.translatedErrors.regex).required(O.translatedErrors.required),icon:b.Z_()};return b.Ry(o)},ln={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:(0,d.Z)("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:(0,d.Z)("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:(0,d.Z)("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]},we={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:(0,d.Z)("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:(0,d.Z)("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]}]},advanced(){return[]}},P={default:{name:"default",type:"text",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:(0,d.Z)("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:(0,d.Z)("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:(0,d.Z)("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:(0,d.Z)("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:(0,d.Z)("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:(0,d.Z)("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:(0,d.Z)("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}};var hs=Object.defineProperty,Ts=Object.defineProperties,Cs=Object.getOwnPropertyDescriptors,Ma=Object.getOwnPropertySymbols,Es=Object.prototype.hasOwnProperty,Ms=Object.prototype.propertyIsEnumerable,Oa=(e,t,n)=>t in e?hs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,un=(e,t)=>{for(var n in t||(t={}))Es.call(t,n)&&Oa(e,n,t[n]);if(Ma)for(var n of Ma(t))Ms.call(t,n)&&Oa(e,n,t[n]);return e},dn=(e,t)=>Ts(e,Cs(t));const Os={boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.private]}]}},component({repeatable:e},t){return t==="1"?{sections:we.advanced("componentToCreate")}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.private,P.max,P.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[dn(un({},P.default),{type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1})]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.unique,P.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.max,P.min]}]}},email(){return{sections:[{sectionTitle:null,items:[dn(un({},P.default),{type:"email"})]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.unique,P.maxLength,P.minLength,P.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((t,n)=>e.enum.indexOf(t)===n&&t).map(t=>({key:t,value:t,metadatas:{intlLabel:{id:`${t}.no-override`,defaultMessage:t}}}))]},{intlLabel:{id:(0,d.Z)("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:(0,d.Z)("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:(0,d.Z)("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.private]}]}},number(e){const t=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:t,intlLabel:{id:(0,d.Z)("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.unique,P.max,P.min,P.private]}]}},password(){return{sections:[{sectionTitle:null,items:[P.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.maxLength,P.minLength,P.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[P.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.maxLength,P.minLength,P.private]}]}},text(){return{sections:[{sectionTitle:null,items:[P.default,P.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.unique,P.maxLength,P.minLength,P.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[dn(un({},P.default),{disabled:Boolean(e.targetField),type:"text"})]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[P.required,P.maxLength,P.minLength,P.private]}]}}},Oe={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:(0,d.Z)("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}};var Ps=Object.defineProperty,Rs=Object.defineProperties,xs=Object.getOwnPropertyDescriptors,Pa=Object.getOwnPropertySymbols,Zs=Object.prototype.hasOwnProperty,As=Object.prototype.propertyIsEnumerable,Ra=(e,t,n)=>t in e?Ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ss=(e,t)=>{for(var n in t||(t={}))Zs.call(t,n)&&Ra(e,n,t[n]);if(Pa)for(var n of Pa(t))As.call(t,n)&&Ra(e,n,t[n]);return e},Fs=(e,t)=>Rs(e,xs(t));const xa={advanced:Os,base:{component(e,t){if(t==="1"){const n=e.createComponent===!0?we.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[ln]},...n]}}return{sections:[{sectionTitle:null,items:[Oe,{name:"component",type:"select-component",intlLabel:{id:(0,d.Z)("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:(0,d.Z)("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:(0,d.Z)("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:(0,d.Z)("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[Oe,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[Oe]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:(0,d.Z)("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:(0,d.Z)("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[Oe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:(0,d.Z)("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:(0,d.Z)("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:(0,d.Z)("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[Oe,{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:(0,d.Z)("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[Oe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:(0,d.Z)("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:(0,d.Z)("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:(0,d.Z)("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[Oe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:(0,d.Z)("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:(0,d.Z)("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:(0,d.Z)("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:(0,d.Z)("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,t,n){const o=n.filter(({type:s})=>["string","text"].includes(s)).map(({name:s})=>({key:s,value:s,metadatas:{intlLabel:{id:`${s}.no-override`,defaultMessage:s}}}));return{sections:[{sectionTitle:null,items:[Fs(Ss({},Oe),{placeholder:{id:(0,d.Z)("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. Slug, SEO URL, Canonical URL"}}),{intlLabel:{id:(0,d.Z)("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...o]}]}]}}}},Ns={sections:[{sectionTitle:null,items:[Oe]}]};var Ds=l(91815),Is=l.n(Ds),Ls=l(40791),qs=l.n(Ls);const cn=e=>qs()(e,{decamelize:!1,lowercase:!1,separator:"_"}),Za=/^[A-Za-z][_0-9A-Za-z]*$/,Aa=e=>({name:"attributeNameAlreadyUsed",message:O.translatedErrors.unique,test(t){return t?!e.includes(t):!1}}),$l=(e,t,n)=>{const o=get(e,["schema","attributes"],{});return Object.keys(o).filter(s=>t?s!==n:!0)},mn=e=>({name:"forbiddenAttributeName",message:(0,d.Z)("error.attributeName.reserved-name"),test(t){return t?!e.includes(t):!1}}),y={default:()=>b.Z_().nullable(),max:()=>b.Rx().integer().nullable(),min:()=>b.Rx().integer().when("max",(e,t)=>e?t.max(e,(0,d.Z)("error.validation.minSupMax")):t).nullable(),maxLength:()=>b.Rx().integer().positive((0,d.Z)("error.validation.positive")).nullable(),minLength:()=>b.Rx().integer().min(0).when("maxLength",(e,t)=>e?t.max(e,(0,d.Z)("error.validation.minSupMax")):t).nullable(),name(e,t){return b.Z_().test(Aa(e)).test(mn(t)).matches(Za,O.translatedErrors.regex).required(O.translatedErrors.required)},required:()=>b.O7(),type:()=>b.Z_().required(O.translatedErrors.required),unique:()=>b.O7().nullable()},pn=(e,t)=>({name:y.name(e,t),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength(),regex:b.Z_().test({name:"isValidRegExpPattern",message:(0,d.Z)("error.validation.regex"),test(o){return new RegExp(o)!==null}}).nullable()}),gn={name:"isMinSuperiorThanMax",message:(0,d.Z)("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:t}=this.parent;return!t||Number.isNaN((0,F.toNumber)(e))?!0:(0,F.toNumber)(t)>=(0,F.toNumber)(e)}},fn={date(e,t){const n={name:y.name(e,t),type:y.type()};return b.Ry(n)},datetime(e,t){const n={name:y.name(e,t),type:y.type()};return b.Ry(n)},time(e,t){const n={name:y.name(e,t),type:y.type()};return b.Ry(n)},default(e,t){const n={name:y.name(e,t),type:y.type()};return b.Ry(n)},biginteger(e,t){const n={name:y.name(e,t),type:y.type(),default:b.Z_().nullable().matches(/^-?\d*$/),unique:y.unique(),required:y.required(),max:b.Z_().nullable().matches(/^-?\d*$/,O.translatedErrors.regex),min:b.Z_().nullable().test(gn).matches(/^-?\d*$/,O.translatedErrors.regex)};return b.Ry(n)},boolean(e,t){const n={name:y.name(e,t),default:b.O7().nullable(),required:y.required(),unique:y.unique()};return b.Ry(n)},component(e,t){const n={name:y.name(e,t),type:y.type(),required:y.required(),max:y.max(),min:y.min(),component:b.Z_().required(O.translatedErrors.required)};return b.Ry(n)},decimal(e,t){const n={name:y.name(e,t),type:y.type(),default:b.Rx(),required:y.required(),max:b.Rx(),min:b.Rx().test(gn)};return b.Ry(n)},dynamiczone(e,t){const n={name:y.name(e,t),type:y.type(),required:y.required(),max:y.max(),min:y.min()};return b.Ry(n)},email(e,t){const n={name:y.name(e,t),type:y.type(),default:b.Z_().email().nullable(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return b.Ry(n)},enumeration(e,t){const n=/^[_A-Za-z][_0-9A-Za-z]*$/,o={name:b.Z_().test(Aa(e)).test(mn(t)).matches(n,O.translatedErrors.regex).required(O.translatedErrors.required),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),enum:b.IX().of(b.Z_()).min(1,O.translatedErrors.min).test({name:"areEnumValuesUnique",message:(0,d.Z)("error.validation.enum-duplicate"),test(s){return!Is()(s.map(cn).filter((u,c,m)=>m.indexOf(u)!==c)).length}}).test({name:"doesNotHaveEmptyValues",message:(0,d.Z)("error.validation.enum-empty-string"),test:s=>!s.map(cn).some(i=>i==="")}).test({name:"doesMatchRegex",message:(0,d.Z)("error.validation.enum-regex"),test:s=>s.map(cn).every(i=>n.test(i))}),enumName:b.Z_().nullable()};return b.Ry(o)},float(e,t){const n={name:y.name(e,t),type:y.type(),required:y.required(),default:b.Rx(),max:b.Rx(),min:b.Rx().test(gn)};return b.Ry(n)},integer(e,t){const n={name:y.name(e,t),type:y.type(),default:b.Rx().integer(),unique:y.unique(),required:y.required(),max:y.max(),min:y.min()};return b.Ry(n)},json(e,t){const n={name:y.name(e,t),type:y.type(),required:y.required(),unique:y.unique()};return b.Ry(n)},media(e,t){const n={name:y.name(e,t),type:y.type(),multiple:b.O7(),required:y.required(),allowedTypes:b.IX().of(b.Z_().oneOf(["images","videos","files","audios"])).min(1).nullable()};return b.Ry(n)},password(e,t){const n={name:y.name(e,t),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return b.Ry(n)},relation(e,t,n,{initialData:o,modifiedData:s}){const i={name:y.name(e,t),target:b.Z_().required(O.translatedErrors.required),relation:b.Z_().required(),type:b.Z_().required(),targetAttribute:b.Vo(()=>{const u=(0,Ht.Z)(s.relation,s.targetAttribute);if(u==="oneWay"||u==="manyWay")return b.Z_().nullable();let c=b.Z_().test(mn(t)),f=[...n.map(({name:g})=>g),s.name].filter(g=>g!==o.targetAttribute);return c.matches(Za,O.translatedErrors.regex).test({name:"forbiddenTargetAttributeName",message:(0,d.Z)("error.validation.relation.targetAttribute-taken"),test(g){return g?!f.includes(g):!1}}).required(O.translatedErrors.required)})};return b.Ry(i)},richtext(e,t){const n={name:y.name(e,t),type:y.type(),default:y.default(),unique:y.unique(),required:y.required(),maxLength:y.maxLength(),minLength:y.minLength()};return b.Ry(n)},string(e,t){const n=pn(e,t);return b.Ry(n)},text(e,t){const n=pn(e,t);return b.Ry(n)},uid(e,t){const n=pn(e,t);return b.Ry(n)}},Sa={name:"displayName",type:"text",intlLabel:{id:(0,d.Z)("contentType.displayName.label"),defaultMessage:"Display name"}},yn={advanced:{default(){return{sections:[{sectionTitle:{id:(0,d.Z)("form.contentType.divider.draft-publish"),defaultMessage:"Draft/Publish"},items:[{intlLabel:{id:(0,d.Z)("contentType.draftAndPublish.label"),defaultMessage:"Draft/publish system"},description:{id:(0,d.Z)("contentType.draftAndPublish.description"),defaultMessage:"Write a draft version of each entry before publishing it"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[Sa,{description:{id:(0,d.Z)("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:(0,d.Z)("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:(0,d.Z)("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:(0,d.Z)("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[Sa,{disabled:!0,description:{id:(0,d.Z)("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:(0,d.Z)("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:(0,d.Z)("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:(0,d.Z)("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:(0,d.Z)("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:(0,d.Z)("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:(0,d.Z)("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:(0,d.Z)("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},js=({usedContentTypeNames:e=[],reservedModels:t=[],singularNames:n=[],pluralNames:o=[]})=>{const s={displayName:b.Z_().test({name:"nameAlreadyUsed",message:O.translatedErrors.unique,test(i){if(!i)return!1;const u=(0,Be.E)(i);return!e.includes(u)}}).test({name:"nameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!t.includes((0,F.toLower)((0,F.trim)(i))):!1}}).required(O.translatedErrors.required),pluralName:b.Z_().test({name:"pluralNameAlreadyUsed",message:O.translatedErrors.unique,test(i){return i?!o.includes(i):!1}}).test({name:"pluralAndSingularAreUnique",message:(0,d.Z)("error.contentType.pluralName-used"),test(i,u){return i?u.parent.singularName!==i:!1}}).test({name:"pluralNameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!t.includes((0,F.toLower)((0,F.trim)(i))):!1}}).required(O.translatedErrors.required),singularName:b.Z_().test({name:"singularNameAlreadyUsed",message:O.translatedErrors.unique,test(i){return i?!n.includes(i):!1}}).test({name:"pluralAndSingularAreUnique",message:(0,d.Z)("error.contentType.singularName-used"),test(i,u){return i?u.parent.pluralName!==i:!1}}).test({name:"singularNameNotAllowed",message:(0,d.Z)("error.contentTypeName.reserved-name"),test(i){return i?!t.includes((0,F.toLower)((0,F.trim)(i))):!1}}).required(O.translatedErrors.required),draftAndPublish:b.O7(),kind:b.Z_().oneOf(["singleType","collectionType"])};return b.Ry(s)},bn={advanced:{default(){return{sections:we.advanced("componentToCreate.")}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[ln]},...we.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[ln]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:(0,d.Z)("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},Fa=(e,t)=>{e.forEach(n=>{if(!("sectionTitle"in n)){t[0].items.push(n);return}t.push(n)})},Na=(e,t)=>e.filter(({name:n})=>n!==t.initialData.name).map(({name:n})=>n);var Da=l(98399),Bs=Object.defineProperty,ws=Object.defineProperties,Us=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,La=Object.prototype.propertyIsEnumerable,qa=(e,t,n)=>t in e?Bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vn=(e,t)=>{for(var n in t||(t={}))Ia.call(t,n)&&qa(e,n,t[n]);if(vt)for(var n of vt(t))La.call(t,n)&&qa(e,n,t[n]);return e},$s=(e,t)=>ws(e,Us(t)),hn=(e,t)=>{var n={};for(var o in e)Ia.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&vt)for(var o of vt(e))t.indexOf(o)<0&&La.call(e,o)&&(n[o]=e[o]);return n};const Ae={customField:{schema({schemaAttributes:e,attributeType:t,customFieldValidator:n,reservedNames:o,schemaData:s,ctbFormsAPI:i}){const u=Na(e,s),c=fn[t](u,o.attributes);return i.makeCustomFieldValidator(c,n,u,o.attributes,s)},form:{base({customField:e}){var t;const n=[{sectionTitle:null,items:[Oe]}];return(t=e.options)!=null&&t.base&&Fa(e.options.base,n),{sections:n}},advanced(e){var t=e,{customField:n,data:o,step:s,extensions:i}=t,u=hn(t,["customField","data","step","extensions"]),c;const m=[{sectionTitle:null,items:[]}],f=i.getAdvancedForm(["attribute",n.type],vn({data:o,type:n.type,step:s},u));if((c=n.options)!=null&&c.advanced&&Fa(n.options.advanced,m),f){const g={sectionTitle:{id:(0,d.Z)("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:f};m.push(g)}return{sections:m}}}},attribute:{schema(e,t,n,o,s,i){const u=D()(e,["schema","attributes"],[]),c=Na(u,s);try{let m=fn[t](c,n.attributes,o,s);return i.makeValidator(["attribute",t],m,c,n.attributes,o,s)}catch(m){return Da.error("Error yup build schema",m),fn.default(c,n.attributes)}},form:{advanced(e){var t=e,{data:n,type:o,step:s,extensions:i}=t,u=hn(t,["data","type","step","extensions"]);try{const c=xa.advanced[o](n,s).sections,m=i.getAdvancedForm(["attribute",o],vn({data:n,type:o,step:s},u));return{sections:c.reduce((g,p)=>(p.sectionTitle===null?g.push(p):g.push($s(vn({},p),{items:[...p.items,...m]})),g),[])}}catch(c){return Da.error(c),{sections:[]}}},base({data:e,type:t,step:n,attributes:o}){try{return xa.base[t](e,n,o)}catch(s){return Ns}}}},contentType:{schema(e,t,n,o,s,i){const u=Object.values(i).map(T=>T.schema.singularName),c=Object.values(i).map(T=>D()(T,["schema","pluralName"],"")),m=t?e.filter(T=>T!==n):e,f=t?u.filter(T=>D()(i,[n,"schema","singularName"],"")!==T):u,g=t?c.filter(T=>D()(i,[n,"schema","pluralName"],"")!==T):c,p=js({usedContentTypeNames:m,reservedModels:o.models,singularNames:f,pluralNames:g});return s.makeValidator(["contentType"],p,m,o.models,f,g)},form:{base({actionType:e}){return e==="create"?yn.base.create():yn.base.edit()},advanced(e){var t=e,{extensions:n}=t,o=hn(t,["extensions"]);const s=yn.advanced.default(o).sections,i=n.getAdvancedForm(["contentType"]);return{sections:[...s,{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:i}]}}}},component:{schema(e,t,n,o=!1,s=null){const i=o?e.filter(u=>u!==s):e;return vs(i,n.models,t)},form:{advanced(){return{sections:we.advanced()}},base(){return{sections:we.base()}}}},addComponentToDynamicZone:{form:{advanced(){return bn.advanced.default()},base({data:e}){return D()(e,"createComponent",!1)?bn.base.createComponent():bn.base.default()}}},editCategory:{schema(e,t){const n=e.filter(o=>o!==t.name).map(o=>Ze()(o));return bs(n)},form:{advanced:()=>({sections:[]}),base(){return ys.base}}}};var ja=l(98178),Ws=l(25061);const ks=()=>e=>e[`${J.Z}_formModal`]||Ws.E,zs=()=>(0,ja.P1)(ks(),e=>e);var Ba=l(98399),Vs=Object.defineProperty,Gs=Object.defineProperties,Ks=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,wa=Object.prototype.hasOwnProperty,Ua=Object.prototype.propertyIsEnumerable,$a=(e,t,n)=>t in e?Vs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ue=(e,t)=>{for(var n in t||(t={}))wa.call(t,n)&&$a(e,n,t[n]);if(ht)for(var n of ht(t))Ua.call(t,n)&&$a(e,n,t[n]);return e},Tt=(e,t)=>Gs(e,Ks(t)),Ct=(e,t)=>{var n={};for(var o in e)wa.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&ht)for(var o of ht(e))t.indexOf(o)<0&&Ua.call(e,o)&&(n[o]=e[o]);return n},Wa=(e,t,n)=>new Promise((o,s)=>{var i=m=>{try{c(n.next(m))}catch(f){s(f)}},u=m=>{try{c(n.throw(m))}catch(f){s(f)}},c=m=>m.done?o(m.value):Promise.resolve(m.value).then(i,u);c((n=n.apply(e,t)).next())});const Hs=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:t,onNavigateToAddCompoToDZModal:n,onNavigateToCreateComponentStep2:o,actionType:s,attributeName:i,attributeType:u,customFieldUid:c,categoryName:m,dynamicZoneTarget:f,forTarget:g,modalType:p,isOpen:T,kind:h,step:R,targetUid:Z}=(0,Re.Z)(),q=(0,O.useCustomFields)().get(c),E=(0,r.useRef)(),S=(0,r.useMemo)(zs,[]),v=(0,Ee.useDispatch)(),K=(0,O.useNotification)(),G=(0,Ee.useSelector)(X=>S(X),Ee.shallowEqual),{push:re}=(0,z.useHistory)(),{trackUsage:N}=(0,O.useTracking)(),{formatMessage:ee}=(0,L.useIntl)(),{getPlugin:W}=(0,O.useStrapiApp)(),Q=W(J.Z).apis.forms,We=Q.components.inputs,{addAttribute:Pe,addCustomFieldAttribute:Je,addCreatedComponentToDynamicZone:Se,allComponentsCategories:k,changeDynamicZoneComponents:M,contentTypes:ke,components:_e,createSchema:ze,deleteCategory:Pn,deleteData:Ot,editCategory:Rn,editCustomFieldAttribute:xn,submitData:Zn,modifiedData:se,nestedComponents:Pt,setModifiedData:An,sortedContentTypesList:Sn,updateSchema:Fn,reservedNames:ve}=(0,Me.Z)(),{componentToCreate:et,formErrors:A,initialData:x,isCreatingComponentWhileAddingAField:j,modifiedData:C}=G,H=g==="contentType"||g==="component"?[g]:[g,Z];(0,r.useEffect)(()=>{if(T){const X=Sn.filter(Ln);p==="editCategory"&&An(),s==="edit"&&p==="attribute"&&g==="contentType"&&N("willEditFieldOfContentType");const ie=[...H,"schema","attributes"],De=nn(D()(se,ie,[]),f)||null;if(p==="editCategory"&&s==="edit"&&v({type:ne._H,modalType:p,actionType:s,data:{name:m}}),p==="contentType"&&s==="create"&&v({type:ne._H,modalType:p,actionType:s,data:{draftAndPublish:!0},pluginOptions:{}}),p==="contentType"&&s==="edit"){const{displayName:Y,draftAndPublish:ae,kind:te,pluginOptions:ce,pluralName:fe,singularName:Te}=D()(se,[...H,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});v({type:ne._H,actionType:s,modalType:p,data:{displayName:Y,draftAndPublish:ae,kind:te,pluginOptions:ce,pluralName:fe,singularName:Te}})}if(p==="component"&&s==="edit"){const Y=D()(se,H,{});v({type:ne._H,actionType:s,modalType:p,data:{displayName:Y.schema.displayName,category:Y.category}})}if(p==="addComponentToDynamicZone"&&s==="edit"){const Y=Tt(Ue({},De),{components:[],name:f,createComponent:!1,componentToCreate:{type:"component"}});v({type:ne.VZ,attributeToEdit:Y})}if(u){const Y=nn(D()(se,ie,[]),i),ae=Tt(Ue({},Y),{name:i});u==="component"&&s==="edit"&&(ae.repeatable||ot()(ae,"repeatable",!1)),v(p==="customField"?{type:ne.OY,customField:q,isEditing:s==="edit",modifiedDataToSetForEditing:ae,forTarget:g}:{type:ne.S0,attributeType:u,nameToSetForRelation:D()(X,["0","title"],"error"),targetUid:D()(X,["0","uid"],"error"),isEditing:s==="edit",modifiedDataToSetForEditing:ae,step:R,forTarget:g})}}else v({type:ne.c2})},[s,i,u,m,f,g,T,p]);const pe=p==="contentType",Fe=p==="component",he=p==="attribute",tt=p==="customField",pr=u==="component"&&he,nt=s==="create",Ne=D()(C,"createComponent",!1)||j,Ve=R==="1",gr=p==="editCategory",fr=p==="chooseAttribute",Nn=(0,Be.E)(C.displayName||""),Dn=D()(se,[...H,"schema","attributes"],null),ol=()=>Wa(void 0,null,function*(){var X;let ie;const De=Ne&&R==="1"?D()(C,"componentToCreate",{}):C;if(pe)ie=Ae.contentType.schema(Object.keys(ke),s==="edit",D()(se,[...H,"uid"],null),ve,Q,ke);else if(Fe)ie=Ae.component.schema(Object.keys(_e),C.category||"",ve,s==="edit",D()(se,[...H,"uid"],null),Q);else if(tt)ie=Ae.customField.schema({schemaAttributes:D()(se,[...H,"schema","attributes"],[]),attributeType:q.type,reservedNames:ve,schemaData:{modifiedData:C,initialData:x},ctbFormsAPI:Q,customFieldValidator:(X=q.options)==null?void 0:X.validator});else if(pr&&Ne&&Ve)ie=Ae.component.schema(Object.keys(_e),D()(C,"componentToCreate.category",""),ve,Q);else if(he&&!Ve){const Y=u==="relation"?"relation":C.type;let ae=[];if(Y==="relation"){const te=D()(C,["target"],null);ae=D()(ke,[te,"schema","attributes"],[]).filter(({name:fe})=>s!=="edit"?!0:fe!==x.targetAttribute)}ie=Ae.attribute.schema(D()(se,H,{}),Y,ve,ae,{modifiedData:C,initialData:x},Q)}else if(gr)ie=Ae.editCategory.schema(k,x,Q);else if(Ve&&Ne)ie=Ae.component.schema(Object.keys(_e),D()(C,"componentToCreate.category",""),ve,Q);else return;yield ie.validate(De,{abortEarly:!1})}),yr=(0,r.useCallback)(X=>{var{target:ie}=X,De=ie,{name:Y,value:ae,type:te}=De,ce=Ct(De,["name","value","type"]);const fe=["enumName","max","min","maxLength","minLength","regex","default"];let Te;fe.includes(Y)&&ae===""?Te=null:Te=ae;const Ce=Object.assign({},A);Y==="max"&&delete Ce.min,Y==="maxLength"&&delete Ce.minLength,delete Ce[Y],v({type:ne.Ey,errors:Ce}),v(Ue({type:ne.P0,keys:Y.split("."),value:Te},ce))},[v,A]),ge=(X,...ie)=>Wa(void 0,[X,...ie],function*(De,Y=nt){De.preventDefault();try{yield ol(),il(Y);const ae=g==="components"?Z:Nn;if(pe)if(nt)ze(Tt(Ue({},C),{kind:h}),p,Nn),re({pathname:`/plugins/${J.Z}/content-types/${Nn}`}),t({forTarget:g,targetUid:ae});else{gs(se,C)?(e(),Zn(C)):K({type:"warning",message:{id:"notification.contentType.relations.conflict"}});return}else if(p==="component")if(nt){const te=(0,Be.N)(C.displayName,C.category),ce=C,{category:fe}=ce,Te=Ct(ce,["category"]);ze(Te,"component",te,fe),re({pathname:`/plugins/${J.Z}/component-categories/${fe}/${te}`}),t({forTarget:g,targetUid:te})}else{Fn(C,p,Z),e();return}else if(gr){if(Ze()(x.name)===Ze()(C.name)){e();return}Rn(x.name,C);return}else if(tt){const te={attributeToSet:Tt(Ue({},C),{customField:c}),forTarget:g,targetUid:Z,initialAttribute:x};s==="edit"?xn(te):Je(te),Y?t({forTarget:g,targetUid:ae}):e();return}else if(he&&!Ne){if(u==="dynamiczone"){Pe(C,g,Z,s==="edit",x),nt?(v({type:ne.I}),E.current._handlers.setSelectedTabIndex(0),n({dynamicZoneTarget:C.name})):e();return}if(!pr){Pe(C,g,Z,s==="edit",x),Y?t({forTarget:g,targetUid:ae}):e();return}if(Ve){o(),v({type:ne.yC,forTarget:g});return}Pe(C,g,Z,s==="edit",x,!0),Y?t({forTarget:g,targetUid:Z}):e()}else if(he&&Ne){if(Ve){N("willCreateComponentFromAttributesModal"),v({type:ne.oF,forTarget:g}),o();return}const te=et,{category:ce,type:fe}=te,Te=Ct(te,["category","type"]),Ce=(0,Be.N)(et.displayName,ce);ze(Te,fe,Ce,ce,Ne),Pe(C,g,Z,!1),v({type:ne.c2}),Y?t({forTarget:"components",targetUid:Ce}):e();return}else{if(Ve)if(Ne){const te=C.componentToCreate,{category:ce,type:fe}=te,Te=Ct(te,["category","type"]),Ce=(0,Be.N)(C.componentToCreate.displayName,ce);ze(Te,fe,Ce,ce,Ne),Se(f,[Ce]),t({forTarget:"components",targetUid:Ce})}else M(f,C.components),e();else Ba.error("This case is not handled");return}v({type:ne.c2})}catch(ae){const te=(0,O.getYupInnerErrors)(ae);Ba.log({err:ae,errors:te}),v({type:ne.Ey,errors:te})}}),br=()=>{e(),v({type:ne.c2})},sl=X=>{if(X==="advanced"){if(pe){N("didSelectContentTypeSettings");return}g==="contentType"&&N("didSelectContentTypeFieldSettings")}},il=X=>{p==="attribute"&&g==="contentType"&&u!=="dynamiczone"&&X&&N("willAddMoreFieldToContentType")},ll=()=>!!(p==="editCategory"||p==="component"||Dt()(C,"createComponent")),ul=fs(g,Z,Pt);if(!T||!p)return null;const vr=D()(Ae,[p,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),dl=g==="components"||g==="component",hr={customInputs:Ue({"allowed-types-select":Mr,"boolean-radio-group":uo,"checkbox-with-number-field":bo,"content-type-radio-group":Oo,"radio-group":Vt,relation:wo,"select-category":Ko,"select-component":Ho,"select-components":Xo,"select-default-boolean":eo,"select-number":Qo,"select-date":Yo,"toggle-draft-publish":Vr,"text-plural":zo,"text-singular":ns,"textarea-enum":ps},We),componentToCreate:et,dynamicZoneTarget:f,formErrors:A,isAddingAComponentToAnotherComponent:dl,isCreatingComponentWhileAddingAField:j,mainBoxHeader:D()(se,[...H,"schema","displayName"],""),modifiedData:C,naturePickerType:g,isCreating:nt,targetUid:Z,forTarget:g},Tr=vr.advanced({data:C,type:u,step:R,actionType:s,attributes:Dn,extensions:Q,forTarget:g,contentTypeSchema:se.contentType||{},customField:q}).sections,Cr=vr.base({data:C,type:u,step:R,actionType:s,attributes:Dn,extensions:Q,forTarget:g,contentTypeSchema:se.contentType||{},customField:q}).sections,cl=Ca(Cr),ml=Ca(Tr),pl=Object.keys(A).some(X=>cl.includes(X)),gl=Object.keys(A).some(X=>ml.includes(X)),fl=D()(ke,[Z,"schema","kind"]),yl=()=>s==="edit"&&Dn.every(({name:X})=>X!==(C==null?void 0:C.name)),bl=()=>{yl()&&N("didEditFieldNameOnContentType")};return r.createElement(it.P,{onClose:br,labelledBy:"title"},r.createElement(Gr,{actionType:s,attributeName:i,categoryName:m,contentTypeKind:h,dynamicZoneTarget:f,modalType:p,forTarget:g,targetUid:Z,attributeType:u,customFieldUid:c}),fr&&r.createElement(Lr,{attributes:ul,forTarget:g,kind:fl||"collectionType"}),!fr&&r.createElement("form",{onSubmit:ge},r.createElement(lt.f,null,r.createElement(ut.v,{label:"todo",id:"tabs",variant:"simple",ref:E,onTabChange:X=>{X===1&&sl("advanced")}},r.createElement(I.k,{justifyContent:"space-between"},r.createElement(Xr,{actionType:s,forTarget:g,kind:h,step:R,modalType:p,attributeType:u,attributeName:i,customField:q}),r.createElement(w.m,null,r.createElement(w.O,{hasError:pl},ee({id:(0,d.Z)("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})),r.createElement(w.O,{hasError:gl,disabled:ll()},ee({id:(0,d.Z)("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})))),r.createElement(Ke.i,null),r.createElement(B.x,{paddingTop:6},r.createElement(U.n,null,r.createElement(U.x,null,r.createElement($.K,{spacing:6},r.createElement(ba,{form:Cr,formErrors:A,genericInputProps:hr,modifiedData:C,onChange:yr}))),r.createElement(U.x,null,r.createElement($.K,{spacing:6},r.createElement(ba,{form:Tr,formErrors:A,genericInputProps:hr,modifiedData:C,onChange:yr}))))))),r.createElement(He.m,{endActions:r.createElement(Kr,{deleteCategory:Pn,deleteContentType:Ot,deleteComponent:Ot,categoryName:x.name,isAttributeModal:p==="attribute",isCustomFieldModal:p==="customField",isComponentToDzModal:p==="addComponentToDynamicZone",isComponentAttribute:u==="component",isComponentModal:p==="component",isContentTypeModal:p==="contentType",isCreatingComponent:s==="create",isCreatingDz:s==="create",isCreatingComponentAttribute:C.createComponent||!1,isCreatingComponentInDz:C.createComponent||!1,isCreatingComponentWhileAddingAField:j,isCreatingContentType:s==="create",isEditingAttribute:s==="edit",isDzAttribute:u==="dynamiczone",isEditingCategory:p==="editCategory",isInFirstComponentStep:R==="1",onSubmitAddComponentAttribute:ge,onSubmitAddComponentToDz:ge,onSubmitCreateComponent:ge,onSubmitCreateContentType:ge,onSubmitCreateDz:ge,onSubmitEditAttribute:ge,onSubmitEditCategory:ge,onSubmitEditComponent:ge,onSubmitEditContentType:ge,onSubmitEditCustomFieldAttribute:ge,onSubmitEditDz:ge,onClickFinish:bl}),startActions:r.createElement(V.z,{variant:"tertiary",onClick:br},ee({id:"app.components.Button.cancel",defaultMessage:"Cancel"}))})))},ka=e=>e.reduce((t,n)=>(t[n.uid]=n,t),{}),Xs=(e,t,n,o)=>{const s=t.reduce((c,m)=>{const f=D()(n,m,{});return c[m]=f,c},{});return{[o?"contentType":"component"]:e,components:s}},Ys=(e,t)=>{const n=Object.keys(e).map(o=>(0,F.get)(e,[o,...t],""));return(0,be.Z)(n)};var Qs=l(13339);const Js=e=>{const t=Object.keys(e).reduce((n,o)=>{const s=(0,F.get)(e,[o,"schema","attributes"],[]),i=_s(s);return[...n,...i]},[]);return(0,be.Z)(t)},_s=e=>e.reduce((t,n)=>{const{type:o,component:s}=n;return o==="component"&&t.push(s),t},[]),za=Js,ei=e=>{const t=Object.keys(e).reduce((n,o)=>{const s=D()(e,[o],{}),i=s.uid;return ti(s)&&n.push(i),n},[]);return(0,be.Z)(t)},ti=e=>D()(e,["schema","attributes"],[]).some(n=>{const{type:o}=n;return o==="component"});var ni=Object.defineProperty,ai=Object.defineProperties,ri=Object.getOwnPropertyDescriptors,Et=Object.getOwnPropertySymbols,Va=Object.prototype.hasOwnProperty,Ga=Object.prototype.propertyIsEnumerable,Ka=(e,t,n)=>t in e?ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oi=(e,t)=>{for(var n in t||(t={}))Va.call(t,n)&&Ka(e,n,t[n]);if(Et)for(var n of Et(t))Ga.call(t,n)&&Ka(e,n,t[n]);return e},si=(e,t)=>ai(e,ri(t)),ii=(e,t)=>{var n={};for(var o in e)Va.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Et)for(var o of Et(e))t.indexOf(o)<0&&Ga.call(e,o)&&(n[o]=e[o]);return n};const li=(e,t)=>{const n=Object.keys(e).filter(o=>{const s=(0,F.get)(e,o,{}),i=(0,F.get)(t,o,{}),u=(0,F.get)(s,["isTemporary"],!1),c=!(0,F.isEqual)(s,i);return u||c});return(0,be.Z)(n)},ui=(e,t)=>{const n=Xa((0,F.get)(e,"schema.attributes",[]),t),o=(0,F.get)(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},o,{category:e.category},(0,F.omit)(e.schema,"attributes"),{attributes:n})},Ha=(e,t=!1)=>{const n=(0,F.get)(e,"uid",null),o=Xa((0,F.get)(e,"schema.attributes",[]),n),s=t?{category:(0,F.get)(e,"category","")}:{},i=Object.assign(s,(0,F.omit)(e.schema,"attributes"),{attributes:o});return delete i.uid,delete i.isTemporary,delete i.visible,delete i.restrictRelationsTo,i},Xa=(e,t)=>e.reduce((n,o)=>{var s=o,{name:i}=s,u=ii(s,["name"]);const c=u,m=c.target===t,f=c.type==="relation",g=(0,F.get)(c,"targetAttribute",null);if(!m)if(f){const p=Object.assign({},c,{targetAttribute:Ya(g)});n[i]=Mt(p)}else n[i]=Mt(c);if(m){const p=c.target,T=Object.assign({},c,{target:p,targetAttribute:Ya(g)});n[i]=Mt(T)}if(c.customField){const p=si(oi({},c),{type:"customField"});n[i]=Mt(p)}return n},{}),Ya=e=>e==="-"?null:e,Mt=e=>Object.keys(e).reduce((t,n)=>(e[n]!==null&&n!=="plugin"&&(t[n]=e[n]),t),{}),di=(e,t,n,o=!1)=>li(e,t).map(u=>{const c=(0,F.get)(e,u,{});return ui(c,n,o)}),ci=e=>(0,F.sortBy)(Object.keys(e).map(t=>({visible:e[t].schema.visible,name:t,title:e[t].schema.displayName,plugin:e[t].plugin||null,uid:t,to:`/plugins/${J.Z}/content-types/${t}`,kind:e[t].schema.kind,restrictRelationsTo:e[t].schema.restrictRelationsTo})).filter(t=>t!==null),t=>(0,F.camelCase)(t.title)),Qa="did-not-kill-server",mi="server is down";function Xe(e,t){return new Promise(n=>{fetch(`${strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":!1}}).then(o=>{if(o.status>=400)throw new Error(mi);if(!t)throw new Error(Qa);n(e)}).catch(o=>{setTimeout(()=>Xe(e,o.message!==Qa).then(n),100)})})}const pi=e=>Object.values(e.attributes).filter(({type:n})=>n==="dynamiczone").every(({components:n})=>Array.isArray(n)&&n.length>0);var oe=l(31947),gi=l(54370);const fi=()=>e=>e[`${J.Z}_dataManagerProvider`]||gi.E,yi=()=>(0,ja.P1)(fi(),e=>e);var bi=Object.defineProperty,vi=Object.defineProperties,hi=Object.getOwnPropertyDescriptors,Ja=Object.getOwnPropertySymbols,Ti=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,_a=(e,t,n)=>t in e?bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tn=(e,t)=>{for(var n in t||(t={}))Ti.call(t,n)&&_a(e,n,t[n]);if(Ja)for(var n of Ja(t))Ci.call(t,n)&&_a(e,n,t[n]);return e},Cn=(e,t)=>vi(e,hi(t));const Ei=e=>Object.keys(e).reduce((t,n)=>{const o=e[n].schema;return t[n]=Cn(Tn({},e[n]),{schema:Cn(Tn({},o),{attributes:Mi(o.attributes)})}),t},{}),Mi=e=>Object.keys(e).reduce((t,n)=>(t.push(Cn(Tn({},e[n]),{name:n})),t),[]),er=Ei;var Ye=l(98399),Oi=Object.defineProperty,tr=Object.getOwnPropertySymbols,Pi=Object.prototype.hasOwnProperty,Ri=Object.prototype.propertyIsEnumerable,nr=(e,t,n)=>t in e?Oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ar=(e,t)=>{for(var n in t||(t={}))Pi.call(t,n)&&nr(e,n,t[n]);if(tr)for(var n of tr(t))Ri.call(t,n)&&nr(e,n,t[n]);return e},$e=(e,t,n)=>new Promise((o,s)=>{var i=m=>{try{c(n.next(m))}catch(f){s(f)}},u=m=>{try{c(n.throw(m))}catch(f){s(f)}},c=m=>m.done?o(m.value):Promise.resolve(m.value).then(i,u);c((n=n.apply(e,t)).next())});const En=({children:e,components:t,contentTypes:n,isLoading:o,isLoadingForDataToBeSet:s,initialData:i,modifiedData:u,reservedNames:c})=>{const m=(0,Ee.useDispatch)(),f=(0,O.useNotification)(),{lockAppWithAutoreload:g,unlockAppWithAutoreload:p}=(0,O.useAutoReloadOverlayBlocker)(),{setCurrentStep:T}=(0,O.useGuidedTour)(),{getPlugin:h}=(0,O.useStrapiApp)(),{apis:R}=h(J.Z),{autoReload:Z}=(0,O.useAppInfos)(),{formatMessage:q}=(0,L.useIntl)(),{trackUsage:E}=(0,O.useTracking)(),{refetchPermissions:S}=(0,O.useRBACProvider)(),{pathname:v}=(0,z.useLocation)(),{onCloseModal:K}=(0,Re.Z)(),G=(0,z.useRouteMatch)(`/plugins/${J.Z}/content-types/:uid`),re=(0,z.useRouteMatch)(`/plugins/${J.Z}/component-categories/:categoryUid/:componentUid`),N=(0,r.useRef)();N.current=q;const ee=Z,W=G!==null,Qe=W?"contentType":"component",Q=W?(0,F.get)(G,"params.uid",null):(0,F.get)(re,"params.componentUid",null),We=(0,r.useRef)(),Pe=W?"content-types":"components";We.current=()=>$e(void 0,null,function*(){try{const[{data:{data:A}},{data:{data:x}},{data:j}]=yield Promise.all(["components","content-types","reserved-names"].map(he=>xe.get(he))),C=ka(A),H=er(C),pe=ka(x),Fe=er(pe);m({type:oe.Id,components:H,contentTypes:Fe,reservedNames:j})}catch(A){Ye.error({err:A}),f({type:"warning",message:{id:"notification.error"}})}}),(0,r.useEffect)(()=>(We.current(),()=>{m({type:oe.Zl})}),[]),(0,r.useEffect)(()=>{!o&&Q&&Pt()},[o,v,Q]),(0,r.useEffect)(()=>{Z||f({type:"info",message:{id:(0,d.Z)("notification.info.autoreaload-disable")}})},[Z,f]);const Je=(A,x,j,C=!1,H,pe=!1)=>{const Fe=C?oe.JO:oe.gz;m({type:Fe,attributeToSet:A,forTarget:x,targetUid:j,initialAttribute:H,shouldAddComponentToData:pe})},Se=({attributeToSet:A,forTarget:x,targetUid:j,initialAttribute:C})=>{m({type:oe.Ir,attributeToSet:A,forTarget:x,targetUid:j,initialAttribute:C})},k=({attributeToSet:A,forTarget:x,targetUid:j,initialAttribute:C})=>{m({type:oe.Ly,attributeToSet:A,forTarget:x,targetUid:j,initialAttribute:C})},M=(A,x)=>{m({type:oe.Uu,dynamicZoneTarget:A,componentsToAdd:x})},ke=(A,x,j,C,H=!1)=>{const pe=x==="contentType"?oe.Sh:oe.VR;m({type:pe,data:A,componentCategory:C,schemaType:x,uid:j,shouldAddComponentToData:H})},_e=(A,x)=>{m({type:oe.o_,dynamicZoneTarget:A,newComponents:x})},ze=(A,x,j="")=>{const C=A==="components"?oe.lw:oe.ai;A==="contentType"&&E("willDeleteFieldOfContentType"),m({type:C,mainDataKey:A,attributeToRemoveName:x,componentUid:j})},Pn=A=>$e(void 0,null,function*(){try{const x=`/component-categories/${A}`,j=window.confirm(q({id:(0,d.Z)("popUpWarning.bodyMessage.category.delete")}));K(),j&&(g(),yield xe.delete(x),yield Xe(!0),yield p(),yield ve())}catch(x){Ye.error({err:x}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}}),Ot=()=>$e(void 0,null,function*(){try{const A=`/${Pe}/${Q}`,x=(0,F.get)(u,[Qe,"isTemporary"],!1),j=window.confirm(q({id:(0,d.Z)(`popUpWarning.bodyMessage.${W?"contentType":"component"}.delete`)}));if(K(),j){if(x){m({type:oe.Ap});return}g(),yield xe.delete(A),yield Xe(!0),yield p(),yield ve()}}catch(A){Ye.error({err:A}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}}),Rn=(A,x)=>$e(void 0,null,function*(){try{const j=`/component-categories/${A}`;K(),g(),yield xe.put(j,x),yield Xe(!0),yield p(),yield ve()}catch(j){Ye.error({err:j}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}}),xn=()=>{const A=Object.assign({},t,u.components);if(!W){const j=(0,F.get)(u,"component",{});(0,F.set)(A,(0,F.get)(j,["uid"],""),j)}const x=ei(A);return(0,be.Z)(x)},Zn=()=>{const A=za(t),x=za(u.components||{});return(0,be.Z)([...x,...A])},se=(A,x)=>{m({type:oe.NG,dzName:A,componentToRemoveIndex:x})},Pt=()=>{const A=W?n:t,x=(0,F.get)(A,Q,{schema:{attributes:[]}}),j=(0,Qs.Z)(x.schema.attributes,t),C=Xs(x,j,t,W),H=(0,F.get)(x,"isTemporary",!1)&&(0,F.size)((0,F.get)(x,"schema.attributes",[]))===0;m({type:oe.xx,schemaToSet:C,hasJustCreatedSchema:H})},An=(0,r.useMemo)(()=>{const A=W?n:t;return Q==="create-content-type"?!1:!Object.keys(A).includes(Q)&&!o},[t,n,Q,W,o]),Sn=(0,r.useMemo)(()=>{const A=Object.keys(n).filter(x=>(0,F.get)(n,[x,"schema","visible"],!0)).sort();return(0,F.get)(A,"0","create-content-type")},[n]);if(An)return r.createElement(z.Redirect,{to:`/plugins/${J.Z}/content-types/${Sn}`});const Fn=A=>$e(void 0,null,function*(){var x,j;try{const C=(0,F.get)(u,[Qe,"isTemporary"],!1),H={components:di(u.components,t,Q,C)};if(W){const he=R.forms.mutateContentTypeSchema(ar(ar({},Ha(u.contentType)),A),i.contentType);if(!pi(he)){f({type:"warning",message:{id:(0,d.Z)("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"}});return}H.contentType=he,E("willSaveContentType")}else H.component=Ha(u.component,!0),E("willSaveComponent");g();const pe=`/${Pe}`,Fe=C?pe:`${pe}/${Q}`;if(C?yield xe.post(Fe,H):yield xe.put(Fe,H),yield Xe(!0),yield p(),C&&(((x=i.contentType)==null?void 0:x.schema.kind)==="collectionType"||((j=i.contentType)==null?void 0:j.schema.kind)==="singleType")&&T("contentTypeBuilder.success"),W){E("didSaveContentType");const he=(0,F.get)(H,["contentType","schema","name"],""),tt=(0,F.get)(i,["contentType","schema","name"],"");!C&&he!==tt&&E("didEditNameOfContentType")}else E("didSaveComponent");yield ve()}catch(C){W||E("didNotSaveComponent"),Ye.error({err:C.response}),f({type:"warning",message:{id:"notification.error"}})}finally{p()}}),ve=()=>$e(void 0,null,function*(){yield S()}),et=(A,x,j)=>{m({type:oe.bi,data:A,schemaType:x,uid:j})};return r.createElement(Zt.Z.Provider,{value:{addAttribute:Je,addCustomFieldAttribute:Se,addCreatedComponentToDynamicZone:M,allComponentsCategories:Ys(t,["category"]),changeDynamicZoneComponents:_e,components:t,componentsGroupedByCategory:(0,F.groupBy)(t,"category"),componentsThatHaveOtherComponentInTheirAttributes:xn(),contentTypes:n,createSchema:ke,deleteCategory:Pn,deleteData:Ot,editCategory:Rn,editCustomFieldAttribute:k,isInDevelopmentMode:ee,initialData:i,isInContentTypeView:W,modifiedData:u,nestedComponents:Zn(),removeAttribute:ze,removeComponentFromDynamicZone:se,reservedNames:c,setModifiedData:Pt,sortedContentTypesList:ci(n),submitData:Fn,updateSchema:et}},s?r.createElement(O.LoadingIndicatorPage,null):r.createElement(r.Fragment,null,e,ee&&r.createElement(Hs,null)))};En.defaultProps={components:{}},En.propTypes={children:a().node.isRequired,components:a().object,contentTypes:a().object.isRequired,isLoading:a().bool.isRequired,isLoadingForDataToBeSet:a().bool.isRequired,initialData:a().object.isRequired,modifiedData:a().object.isRequired,reservedNames:a().object.isRequired};const xi=yi(),Zi=(0,Ee.connect)(xi,null),Ai=(0,rt.compose)(Zi)((0,r.memo)(En));var Si=l(51216);const rr={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,kind:null,step:null,targetUid:null,customFieldUid:null};var Fi=Object.defineProperty,Ni=Object.defineProperties,Di=Object.getOwnPropertyDescriptors,or=Object.getOwnPropertySymbols,Ii=Object.prototype.hasOwnProperty,Li=Object.prototype.propertyIsEnumerable,sr=(e,t,n)=>t in e?Fi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ue=(e,t)=>{for(var n in t||(t={}))Ii.call(t,n)&&sr(e,n,t[n]);if(or)for(var n of or(t))Li.call(t,n)&&sr(e,n,t[n]);return e},de=(e,t)=>Ni(e,Di(t));const ir=({children:e})=>{const[t,n]=(0,r.useState)(rr),{trackUsage:o}=(0,O.useTracking)(),s=({attributeType:E,customFieldUid:S})=>{n(v=>de(ue({},v),{actionType:"create",modalType:"customField",attributeType:E,customFieldUid:S}))},i=({attributeType:E,step:S})=>{t.forTarget==="contentType"&&o("didSelectContentTypeFieldType",{type:E}),n(v=>de(ue({},v),{actionType:"create",modalType:"attribute",step:S,attributeType:E}))},u=({dynamicZoneTarget:E,targetUid:S})=>{n(v=>de(ue({},v),{dynamicZoneTarget:E,targetUid:S,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},c=({forTarget:E,targetUid:S})=>{n(v=>de(ue({},v),{actionType:"create",forTarget:E,targetUid:S,modalType:"chooseAttribute",isOpen:!0}))},m=E=>{n(S=>de(ue(ue({},S),E),{isOpen:!0}))},f=E=>{n(S=>de(ue({},S),{categoryName:E,actionType:"edit",modalType:"editCategory",isOpen:!0}))},g=({forTarget:E,targetUid:S,attributeName:v,attributeType:K,customFieldUid:G})=>{n(re=>de(ue({},re),{modalType:"customField",customFieldUid:G,actionType:"edit",forTarget:E,targetUid:S,attributeName:v,attributeType:K,isOpen:!0}))},p=({forTarget:E,targetUid:S,attributeName:v,attributeType:K,step:G})=>{n(re=>de(ue({},re),{modalType:"attribute",actionType:"edit",forTarget:E,targetUid:S,attributeName:v,attributeType:K,step:G,isOpen:!0}))},T=({modalType:E,forTarget:S,targetUid:v,kind:K})=>{n(G=>de(ue({},G),{modalType:E,actionType:"edit",forTarget:S,targetUid:v,kind:K,isOpen:!0}))},h=()=>{n(rr)},R=({forTarget:E,targetUid:S})=>{n(v=>de(ue({},v),{forTarget:E,targetUid:S,modalType:"chooseAttribute"}))},Z=()=>{n(E=>de(ue({},E),{attributeType:"component",modalType:"attribute",step:"2"}))},q=({dynamicZoneTarget:E})=>{n(S=>de(ue({},S),{dynamicZoneTarget:E,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null}))};return r.createElement(Si.Z.Provider,{value:de(ue({},t),{onClickSelectField:i,onClickSelectCustomField:s,onCloseModal:h,onNavigateToChooseAttributeModal:R,onNavigateToAddCompoToDZModal:q,onOpenModalAddComponentsToDZ:u,onNavigateToCreateComponentStep2:Z,onOpenModalAddField:c,onOpenModalCreateSchema:m,onOpenModalEditCategory:f,onOpenModalEditField:p,onOpenModalEditCustomField:g,onOpenModalEditSchema:T,setFormModalNavigationState:n})},e)};ir.propTypes={children:a().node.isRequired};const qi=ir,ji=(0,r.lazy)(()=>l.e(5905).then(l.bind(l,69073))),Bi=()=>{const{url:e}=(0,z.useRouteMatch)(),{categoryUid:t}=(0,z.useParams)();return r.createElement(r.Suspense,{fallback:r.createElement(O.LoadingIndicatorPage,null)},r.createElement(z.Switch,null,r.createElement(z.Route,{path:`${e}/:componentUid`},r.createElement(ji,{categoryId:t}))))};var wi=l(90700),Ui=l(8598),$i=l(77013),Wi=l(79318),ki=l(28832),lr=l(66618),zi=l(7563),Vi=l(86834),Gi=l.n(Vi),Ki=l(98978),ur=l.n(Ki),Hi=l(89793),Xi=l.n(Hi),Yi=l(58469),Qi=Object.defineProperty,Ji=Object.defineProperties,_i=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,el=Object.prototype.hasOwnProperty,tl=Object.prototype.propertyIsEnumerable,cr=(e,t,n)=>t in e?Qi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mn=(e,t)=>{for(var n in t||(t={}))el.call(t,n)&&cr(e,n,t[n]);if(dr)for(var n of dr(t))tl.call(t,n)&&cr(e,n,t[n]);return e},On=(e,t)=>Ji(e,_i(t));const nl=()=>{const{components:e,componentsGroupedByCategory:t,contentTypes:n,isInDevelopmentMode:o,sortedContentTypesList:s,modifiedData:i,initialData:u}=(0,Me.Z)(),c=(0,O.useNotification)(),{trackUsage:m}=(0,O.useTracking)(),[f,g]=(0,r.useState)(""),{onOpenModalCreateSchema:p,onOpenModalEditCategory:T}=(0,Re.Z)(),h=ur()(Object.keys(t).map(N=>({name:N,title:N,isEditable:o,onClickEdit(ee,W){ee.stopPropagation(),R?T(W.name):S()},links:ur()(t[N].map(ee=>({name:ee.uid,to:`/plugins/${J.Z}/component-categories/${N}/${ee.uid}`,title:ee.schema.displayName})),ee=>ee.title)})),N=>N.title),R=!Object.keys(n).some(N=>n[N].isTemporary===!0)&&!Object.keys(e).some(N=>e[N].isTemporary===!0)&&Xi()(i,u),Z=()=>{R?(m("willCreateContentType"),p({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):S()},q=()=>{R?(m("willCreateSingleType"),p({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):S()},E=()=>{R?(m("willCreateComponent"),p({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):S()},S=()=>{c({type:"info",message:{id:`${(0,d.Z)("notification.info.creating.notSaved")}`,defaultMessage:"Please save your work before creating a new collection type or component"}})},v=s.filter(N=>N.visible),K=[{name:"models",title:{id:`${(0,d.Z)("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:o&&{id:`${(0,d.Z)("button.model.create")}`,defaultMessage:"Create new collection type",onClick:Z},links:v.filter(N=>N.kind==="collectionType")},{name:"singleTypes",title:{id:`${(0,d.Z)("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:o&&{id:`${(0,d.Z)("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:q},links:v.filter(N=>N.kind==="singleType")},{name:"components",title:{id:`${(0,d.Z)("menu.section.components.name")}`,defaultMessage:"Components"},customLink:o&&{id:`${(0,d.Z)("button.component.create")}`,defaultMessage:"Create a new component",onClick:E},links:h}],G=N=>(0,Yi.ZP)(N,Ze()(f),{keys:[ee=>Ze()(ee.title)]});return{menu:(()=>K.map(N=>N.links.some(W=>!Gi()(W.links))?On(Mn({},N),{links:N.links.map(W=>On(Mn({},W),{links:G(W.links)}))}):On(Mn({},N),{links:G(N.links)})))(),searchValue:f,onSearchChange:g}},al=()=>{const{menu:e,searchValue:t,onSearchChange:n}=nl(),{formatMessage:o}=(0,L.useIntl)();return r.createElement(wi.m,{ariaLabel:o({id:`${(0,d.Z)("plugin.name")}`,defaultMessage:"Content-Types Builder"})},r.createElement(Ui.p,{searchable:!0,value:t,onClear:()=>n(""),onChange:s=>n(s.target.value),label:o({id:`${(0,d.Z)("plugin.name")}`,defaultMessage:"Content-Types Builder"}),searchLabel:o({id:"global.search",defaultMessage:"Search"})}),r.createElement($i.Z,null,e.map(s=>r.createElement(r.Fragment,{key:s.name},r.createElement(Wi.D,{label:o({id:s.title.id,defaultMessage:s.title.defaultMessage}),collapsable:!0,badgeLabel:s.links.length.toString()},s.links.map(i=>i.links?r.createElement(ki.z,{key:i.name,label:me()(i.title)},i.links.map(u=>r.createElement(lr.E,{as:z.NavLink,to:u.to,active:u.active,key:u.name,isSubSectionChild:!0},me()(o({id:u.name,defaultMessage:u.title}))))):r.createElement(lr.E,{as:z.NavLink,to:i.to,active:i.active,key:i.name},me()(o({id:i.name,defaultMessage:i.title}))))),s.customLink&&r.createElement(B.x,{paddingLeft:7},r.createElement(zi.A,{onClick:s.customLink.onClick,startIcon:r.createElement(Le.default,null),marginTop:2},o({id:s.customLink.id,defaultMessage:s.customLink.defaultMessage})))))))},mr=(0,r.lazy)(()=>l.e(5905).then(l.bind(l,69073))),rl=()=>{const{formatMessage:e}=(0,L.useIntl)(),t=e({id:`${J.Z}.plugin.name`,defaultMessage:"Content Types Builder"}),{startSection:n}=(0,O.useGuidedTour)(),o=(0,r.useRef)(n);return(0,r.useEffect)(()=>{o.current&&o.current("contentTypeBuilder")},[]),r.createElement(O.CheckPagePermissions,{permissions:at.Z.main},r.createElement(ye.Helmet,{title:t}),r.createElement(qi,null,r.createElement(Ai,null,r.createElement(Rt.A,{sideNav:r.createElement(al,null)},r.createElement(r.Suspense,{fallback:r.createElement(O.LoadingIndicatorPage,null)},r.createElement(z.Switch,null,r.createElement(z.Route,{path:`/plugins/${J.Z}/content-types/create-content-type`,component:mr}),r.createElement(z.Route,{path:`/plugins/${J.Z}/content-types/:uid`,component:mr}),r.createElement(z.Route,{path:`/plugins/${J.Z}/component-categories/:categoryUid`,component:Bi})))))))}},92318:(qe,le,l)=>{l.d(le,{Z:()=>ye});var r=l(25158);const ye=L=>`${r.Z}.${L}`}}]);
