!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"),require("validatorjs"));else if("function"==typeof define&&define.amd)define(["react","validatorjs"],e);else{var n="object"==typeof exports?e(require("react"),require("validatorjs")):e(t.react,t.validatorjs);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e),n.d(e,"Lang",function(){return r}),n.d(e,"useFormInputValidation",function(){return v});var r,o=n(1),i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){t.ar="ar",t.az="az",t.be="be",t.bg="bg",t.bs="bs",t.ca="ca",t.cs="cs",t.cy="cy",t.da="da",t.de="de",t.el="el",t.en="en",t.es="es",t.et="et",t.eu="eu",t.fa="fa",t.fi="fi",t.fr="fr",t.hr="hr",t.hu="hu",t.id="id",t.it="it",t.ja="ja",t.ka="ka",t.ko="ko",t.It="It",t.Iv="Iv",t.mk="mk",t.mn="mn",t.ms="ms",t.nb_NO="nb_NO",t.nl="nl",t.pl="pl",t.pt="pt",t.pt_BR="pt_BR",t.ro="ro",t.ru="ru",t.se="se",t.sl="sl",t.sq="sq",t.sr="sr",t.sv="sv",t.tr="tr",t.ua="ua",t.uk="uk",t.vi="vi",t.zh="zh",t.zh_TW="zh_TW"}(r||(r={}));var a,u=function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.useLang=function(t){},e.register=function(t,e,n){},e.registerAsync=function(t,e,n){},e.setMessages=function(t,e){},e.getMessages=function(t){return a},e.getDefaultLang=function(){return a},e.setAttributeFormatter=function(t){},e.prototype.addEventListener=function(t,e){return a},e.prototype.removeEventListener=function(t,e){return a},e.prototype.useRules=function(t){},e.prototype.handleChangeEvent=function(t){},e.prototype.handleBlurEvent=function(t){},e.prototype.handleSubmit=function(t){},e}(function(){function t(){this.listeners={}}return t.prototype.addListener=function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.removeListener=function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,o=n.length;r<o;r++)if(n[r]===e)return void n.splice(r,1)},t.prototype.emit=function(t){if(!(t.type in this.listeners))return!0;for(var e=this.listeners[t.type].slice(),n=0,r=e.length;n<r;n++)e[n].call(this,t.detail);return!t.defaultPrevented},t}()),c=n(0),s=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},f=function(t){var e=document.getElementsByName(t.name),n=[];return s([],e,!0).filter(function(t){return!0===t.checked}).forEach(function(t){return n.push(t.value)}),n},l=function(t){var e=document.getElementsByName(t.name),n=s([],e,!0).filter(function(t){return!0===t.checked});return n[0]?n[0].value:""},p=function(t,e){Object.keys(t).forEach(function(t){delete e[t]})},h=function(t){var e={};return Object.keys(t.errors.all()).forEach(function(n){e[n]=t.errors.first(n)}),e},b=function(){return(b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},d=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):function(t){return t instanceof n?t:new n(function(e){e(t)})}(t.value).then(a,u)}c((r=r.apply(t,e||[])).next())})},y=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function v(t,e){var n=this;void 0===t&&(t={});var r=Object(c.useRef)(t),i=Object(c.useRef)({}),a=Object(c.useState)(e||{}),u=a[0],s=a[1],v=Object(c.useState)(r.current),m=v[0],g=v[1],j=Object(c.useState)(i.current),O=j[0],k=j[1],_=Object(c.useState)(!1),E=_[0],w=_[1],A=Object(c.useCallback)(function(t){s(t)},[]),x=Object(c.useCallback)(function(t){o.useLang(t)},[]),S=Object(c.useCallback)(function(t,e,n){o.register(t,e,n)},[]),L=Object(c.useCallback)(function(t,e,n){o.registerAsync(t,e,n)},[]),C=Object(c.useCallback)(function(t,e){o.setMessages(t,e)},[]),P=Object(c.useCallback)(function(t){return o.getMessages(t)},[]),M=Object(c.useCallback)(function(){return o.getDefaultLang()},[]),q=Object(c.useCallback)(function(t){o.setAttributeFormatter(t)},[]),B=Object(c.useCallback)(function(t){var e=t.target.name;if(e){var n="checkbox"===t.target.type?f(t.target):"radio"===t.target.type?l(t.target):t.target.value;r.current[e]=n,g(function(t){var r;return b(b({},t),((r={})[e]=n,r))})}},[]),F=function(t){return new Promise(function(e){var n={},r={},a={},c=!1;t.forEach(function(t){var e=t.getAttribute("name");if(n[e]=m[e],r[e]=u[e],r[e]||(console.warn("Rule is not defind for ".concat(e)),r[e]=""),e.endsWith("_confirmation")){var o=e.slice(0,e.indexOf("_confirmation"));n[o]=m[o]}t.hasAttribute("data-attribute-name")&&(a[e]=t.getAttribute("data-attribute-name")),t.hasAttribute("data-async")&&(c=!0)});var s=new o(n,r);if(s.setAttributeNames(a),!c){if(s.fails()){var f=h(s);return e(b(b({},O),f))}return p(n,i.current),e(i.current)}s.checkAsync(function(){p(n,i.current),e(i.current)},function(){var t=h(s);e(b(b({},O),t))})})},R=Object(c.useCallback)(function(t){var e=t.target;F([e]).then(function(t){Object.entries(t).forEach(function(t){var e=t[0],n=t[1];i.current[e]=n}),k(function(e){return b(b({},e),t)})}).catch(function(t){return console.error(t)})},[]),D=Object(c.useCallback)(function(t){return d(n,void 0,void 0,function(){return y(this,function(e){return t.preventDefault(),[2,new Promise(function(e){(function(t){var e=[];return t.querySelectorAll("textarea,select,input:not([type='submit']):not([type='file']):not([data-ignore-validation])").forEach(function(t){e.push(t)}),new Promise(function(t){F(e).then(function(e){Object.entries(e).forEach(function(t){var e=t[0],n=t[1];i.current[e]=n}),k(function(t){return b(b({},t),e)}),t(0===Object.keys(e).length)}).catch(function(t){return console.log(t)})})})(t.target).then(function(t){t&&w(!0),e(t)})})]})})},[]);return[Object(c.useMemo)(function(){return m},[]),Object(c.useMemo)(function(){return O},[]),Object(c.useMemo)(function(){return{isValidForm:E,useRules:A,useLang:x,register:S,registerAsync:L,setMessages:C,setAttributeFormatter:q,getMessages:P,getDefaultLang:M,handleChangeEvent:B,handleBlurEvent:R,handleSubmit:D,validate:D}},[E])]}var m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(t){function e(n,r){var o=t.call(this,n,r)||this;return o.rules={},o.errors={},e.useLang(r&&r.locale?r.locale:"en"),o.component=n,o.handleChangeEvent=o.handleChangeEvent.bind(o),o.handleSubmit=o.handleSubmit.bind(o),o.handleBlurEvent=o.handleBlurEvent.bind(o),o}return m(e,t),e.useLang=function(t){o.useLang(t)},e.register=function(t,e,n){o.register(t,e,n)},e.registerAsync=function(t,e,n){o.registerAsync(t,e,n)},e.setMessages=function(t,e){o.setMessages(t,e)},e.getMessages=function(t){return o.getMessages(t)},e.getDefaultLang=function(){return o.getDefaultLang()},e.setAttributeFormatter=function(t){o.setAttributeFormatter(t)},Object.defineProperty(e.prototype,"onformsubmit",{get:function(){return this._onformsubmit},set:function(e){this._onformsubmit&&t.prototype.removeListener.call(this,"formsubmit",this._onformsubmit),this._onformsubmit=e,t.prototype.addListener.call(this,"formsubmit",this._onformsubmit)},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,n){return t.prototype.addListener.call(this,e,n),this},e.prototype.removeEventListener=function(e,n){return t.prototype.removeListener.call(this,e,n),this},e.prototype.useRules=function(t){this.rules=t},e.prototype.handleChangeEvent=function(t){var e=t.target.name;if(this.component&&e){var n=Object.assign({},this.component.state.fields);n[e]="checkbox"===t.target.type?f(t.target):"radio"===t.target.type?l(t.target):t.target.value,this.component.setState({fields:n,isValidatorUpdate:!0})}},e.prototype.handleBlurEvent=function(t){var e=this,n=t.target;this.validate([n]).then(function(t){e.component&&e.component.hasOwnProperty("state")&&(e.errors=Object.assign(e.errors,t),e.component.setState({errors:e.errors,isValidatorUpdate:!0}))}).catch(function(t){return console.error(t)})},e.prototype.handleSubmit=function(e){var n=this;e.preventDefault(),this.validateForm(e.target).then(function(e){e&&t.prototype.emit.call(n,n.getEvent(n.component.state.fields))})},e.prototype.validateForm=function(t){var e=this;this.component&&this.component.state||(this.component.state={errors:{}});var n=[];return t.querySelectorAll("textarea,select,input:not([type='submit']):not([type='file']):not([data-ignore-validation])").forEach(function(t){n.push(t)}),new Promise(function(r){e.validate(n).then(function(n){e.errors=n,e.component.setState({errors:e.errors,isValidatorUpdate:!0}),Object.keys(e.component.state.errors)[0]&&t.querySelector('[name="'.concat(Object.keys(e.component.state.errors)[0],'"]'))&&t.querySelector('[name="'.concat(Object.keys(e.component.state.errors)[0],'"]')).focus(),r(0===Object.keys(e.component.state.errors).length)}).catch(function(t){return console.log(t)})})},e.prototype.validate=function(t){var e=this;return new Promise(function(n){var r={},i={},a={},u={},c=!1;t.forEach(function(t){var n=t.getAttribute("name");if(i[n]=e.component.state.fields[n],a[n]=e.rules[n],a[n]||(console.warn("Rule is not defind for ".concat(n)),a[n]=""),n.endsWith("_confirmation")){var r=n.slice(0,n.indexOf("_confirmation"));i[r]=e.component.state.fields[r]}t.hasAttribute("data-attribute-name")&&(u[n]=t.getAttribute("data-attribute-name")),t.hasAttribute("data-async")&&(c=!0)});var s=new o(i,a);if(s.setAttributeNames(u),!c)return s.fails()?(r=h(s),n(r)):(e.invalidateErrors(i),n(r));s.checkAsync(function(){e.invalidateErrors(i),n(r)},function(){r=h(s),n(r)})})},e.prototype.invalidateErrors=function(t){var e=this;Object.keys(t).forEach(function(t){delete e.errors[t]})},e.prototype.getEvent=function(t){return new CustomEvent("formsubmit",{detail:t})},e}(u);e.default=g}])});